(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))q(h);new MutationObserver(h=>{for(const j of h)if(j.type==="childList")for(const C of j.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&q(C)}).observe(document,{childList:!0,subtree:!0});function I(h){const j={};return h.integrity&&(j.integrity=h.integrity),h.referrerpolicy&&(j.referrerPolicy=h.referrerpolicy),h.crossorigin==="use-credentials"?j.credentials="include":h.crossorigin==="anonymous"?j.credentials="omit":j.credentials="same-origin",j}function q(h){if(h.ep)return;h.ep=!0;const j=I(h);fetch(h.href,j)}})();var mt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Nn={exports:{}};/*! For license information please see lsplugin.user.js.LICENSE.txt */(function(E,m){(function(I,q){E.exports=q()})(self,()=>(()=>{var I={227:(C,s,S)=>{var _=S(155);s.formatArgs=function(w){if(w[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+w[0]+(this.useColors?"%c ":" ")+"+"+C.exports.humanize(this.diff),!this.useColors)return;const U="color: "+this.color;w.splice(1,0,U,"color: inherit");let y=0,d=0;w[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(y++,b==="%c"&&(d=y))}),w.splice(d,0,U)},s.save=function(w){try{w?s.storage.setItem("debug",w):s.storage.removeItem("debug")}catch{}},s.load=function(){let w;try{w=s.storage.getItem("debug")}catch{}return!w&&_!==void 0&&"env"in _&&(w=_.env.DEBUG),w},s.useColors=function(){return!(typeof window>"u"||!window.process||window.process.type!=="renderer"&&!window.process.__nwjs)||(typeof navigator>"u"||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},s.storage=function(){try{return localStorage}catch{}}(),s.destroy=(()=>{let w=!1;return()=>{w||(w=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),s.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],s.log=console.debug||console.log||(()=>{}),C.exports=S(447)(s);const{formatters:g}=C.exports;g.j=function(w){try{return JSON.stringify(w)}catch(U){return"[UnexpectedJSONParseError]: "+U.message}}},447:(C,s,S)=>{C.exports=function(_){function g(y){let d,b=null;function x(...Y){if(!x.enabled)return;const H=x,D=Number(new Date),ne=D-(d||D);H.diff=ne,H.prev=d,H.curr=D,d=D,Y[0]=g.coerce(Y[0]),typeof Y[0]!="string"&&Y.unshift("%O");let R=0;Y[0]=Y[0].replace(/%([a-zA-Z%])/g,(L,a)=>{if(L==="%%")return"%";R++;const l=g.formatters[a];if(typeof l=="function"){const p=Y[R];L=l.call(H,p),Y.splice(R,1),R--}return L}),g.formatArgs.call(H,Y),(H.log||g.log).apply(H,Y)}return x.namespace=y,x.useColors=g.useColors(),x.color=g.selectColor(y),x.extend=w,x.destroy=g.destroy,Object.defineProperty(x,"enabled",{enumerable:!0,configurable:!1,get:()=>b===null?g.enabled(y):b,set:Y=>{b=Y}}),typeof g.init=="function"&&g.init(x),x}function w(y,d){const b=g(this.namespace+(d===void 0?":":d)+y);return b.log=this.log,b}function U(y){return y.toString().substring(2,y.toString().length-2).replace(/\.\*\?$/,"*")}return g.debug=g,g.default=g,g.coerce=function(y){return y instanceof Error?y.stack||y.message:y},g.disable=function(){const y=[...g.names.map(U),...g.skips.map(U).map(d=>"-"+d)].join(",");return g.enable(""),y},g.enable=function(y){let d;g.save(y),g.names=[],g.skips=[];const b=(typeof y=="string"?y:"").split(/[\s,]+/),x=b.length;for(d=0;d<x;d++)b[d]&&((y=b[d].replace(/\*/g,".*?"))[0]==="-"?g.skips.push(new RegExp("^"+y.substr(1)+"$")):g.names.push(new RegExp("^"+y+"$")))},g.enabled=function(y){if(y[y.length-1]==="*")return!0;let d,b;for(d=0,b=g.skips.length;d<b;d++)if(g.skips[d].test(y))return!1;for(d=0,b=g.names.length;d<b;d++)if(g.names[d].test(y))return!0;return!1},g.humanize=S(824),g.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(_).forEach(y=>{g[y]=_[y]}),g.names=[],g.skips=[],g.formatters={},g.selectColor=function(y){let d=0;for(let b=0;b<y.length;b++)d=(d<<5)-d+y.charCodeAt(b),d|=0;return g.colors[Math.abs(d)%g.colors.length]},g.enable(g.load()),g}},856:function(C){C.exports=function(){function s(Q){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(N){return typeof N}:function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N})(Q)}function S(Q,N){return(S=Object.setPrototypeOf||function(B,se){return B.__proto__=se,B})(Q,N)}function _(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function g(Q,N,B){return(g=_()?Reflect.construct:function(se,ye,Se){var We=[null];We.push.apply(We,ye);var ze=new(Function.bind.apply(se,We));return Se&&S(ze,Se.prototype),ze}).apply(null,arguments)}function w(Q){return function(N){if(Array.isArray(N))return U(N)}(Q)||function(N){if(typeof Symbol<"u"&&N[Symbol.iterator]!=null||N["@@iterator"]!=null)return Array.from(N)}(Q)||function(N,B){if(N){if(typeof N=="string")return U(N,B);var se=Object.prototype.toString.call(N).slice(8,-1);return se==="Object"&&N.constructor&&(se=N.constructor.name),se==="Map"||se==="Set"?Array.from(N):se==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(se)?U(N,B):void 0}}(Q)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function U(Q,N){(N==null||N>Q.length)&&(N=Q.length);for(var B=0,se=new Array(N);B<N;B++)se[B]=Q[B];return se}var y=Object.hasOwnProperty,d=Object.setPrototypeOf,b=Object.isFrozen,x=Object.getPrototypeOf,Y=Object.getOwnPropertyDescriptor,H=Object.freeze,D=Object.seal,ne=Object.create,R=typeof Reflect<"u"&&Reflect,L=R.apply,a=R.construct;L||(L=function(Q,N,B){return Q.apply(N,B)}),H||(H=function(Q){return Q}),D||(D=function(Q){return Q}),a||(a=function(Q,N){return g(Q,w(N))});var l,p=i(Array.prototype.forEach),v=i(Array.prototype.pop),X=i(Array.prototype.push),re=i(String.prototype.toLowerCase),z=i(String.prototype.match),A=i(String.prototype.replace),T=i(String.prototype.indexOf),G=i(String.prototype.trim),M=i(RegExp.prototype.test),Z=(l=TypeError,function(){for(var Q=arguments.length,N=new Array(Q),B=0;B<Q;B++)N[B]=arguments[B];return a(l,N)});function i(Q){return function(N){for(var B=arguments.length,se=new Array(B>1?B-1:0),ye=1;ye<B;ye++)se[ye-1]=arguments[ye];return L(Q,N,se)}}function c(Q,N){d&&d(Q,null);for(var B=N.length;B--;){var se=N[B];if(typeof se=="string"){var ye=re(se);ye!==se&&(b(N)||(N[B]=ye),se=ye)}Q[se]=!0}return Q}function F(Q){var N,B=ne(null);for(N in Q)L(y,Q,[N])&&(B[N]=Q[N]);return B}function K(Q,N){for(;Q!==null;){var B=Y(Q,N);if(B){if(B.get)return i(B.get);if(typeof B.value=="function")return i(B.value)}Q=x(Q)}return function(se){return console.warn("fallback value for",se),null}}var oe=H(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),le=H(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),te=H(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),de=H(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),he=H(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),pe=H(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),me=H(["#text"]),be=H(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),fe=H(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),ie=H(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_e=H(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),De=D(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Be=D(/<%[\w\W]*|[\w\W]*%>/gm),qe=D(/^data-[\-\w.\u00B7-\uFFFF]/),Pe=D(/^aria-[\-\w]+$/),it=D(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Qe=D(/^(?:\w+script|data):/i),Bt=D(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),wn=D(/^html$/i),Wt=function(){return typeof window>"u"?null:window},_n=function(Q,N){if(s(Q)!=="object"||typeof Q.createPolicy!="function")return null;var B=null,se="data-tt-policy-suffix";N.currentScript&&N.currentScript.hasAttribute(se)&&(B=N.currentScript.getAttribute(se));var ye="dompurify"+(B?"#"+B:"");try{return Q.createPolicy(ye,{createHTML:function(Se){return Se}})}catch{return console.warn("TrustedTypes policy "+ye+" could not be created."),null}};return function Q(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Wt(),B=function(r){return Q(r)};if(B.version="2.3.8",B.removed=[],!N||!N.document||N.document.nodeType!==9)return B.isSupported=!1,B;var se=N.document,ye=N.document,Se=N.DocumentFragment,We=N.HTMLTemplateElement,ze=N.Node,Gt=N.Element,bt=N.NodeFilter,st=N.NamedNodeMap,vt=st===void 0?N.NamedNodeMap||N.MozNamedAttrMap:st,Yt=N.HTMLFormElement,wt=N.DOMParser,Vt=N.trustedTypes,Xe=Gt.prototype,Kt=K(Xe,"cloneNode"),Zt=K(Xe,"nextSibling"),Cn=K(Xe,"childNodes"),_t=K(Xe,"parentNode");if(typeof We=="function"){var lt=ye.createElement("template");lt.content&&lt.content.ownerDocument&&(ye=lt.content.ownerDocument)}var $e=_n(Vt,se),Qt=$e?$e.createHTML(""):"",ce=ye,ct=ce.implementation,et=ce.createNodeIterator,Ct=ce.createDocumentFragment,Xt=ce.getElementsByTagName,en=se.importNode,kt={};try{kt=F(ye).documentMode?ye.documentMode:{}}catch{}var xe={};B.isSupported=typeof _t=="function"&&ct&&ct.createHTMLDocument!==void 0&&kt!==9;var tt,Je,St=De,ut=Be,kn=qe,Sn=Pe,xn=Qe,tn=Bt,dt=it,Ce=null,nn=c({},[].concat(w(oe),w(le),w(te),w(he),w(me))),ke=null,xt=c({},[].concat(w(be),w(fe),w(ie),w(_e))),ve=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ge=null,Mt=null,rn=!0,At=!0,on=!1,Ne=!1,je=!1,Tt=!1,Et=!1,Ye=!1,nt=!1,rt=!1,ot=!0,Ot=!0,Ue=!1,Ve={},Ke=null,Dt=c({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Le=null,an=c({},["audio","video","img","source","image","track"]),jt=null,pt=c({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ft="http://www.w3.org/1998/Math/MathML",$t="http://www.w3.org/2000/svg",Ie="http://www.w3.org/1999/xhtml",ft=Ie,Nt=!1,Lt=["application/xhtml+xml","text/html"],Mn="text/html",Ze=null,An=ye.createElement("form"),sn=function(r){return r instanceof RegExp||r instanceof Function},Ee=function(r){Ze&&Ze===r||(r&&s(r)==="object"||(r={}),r=F(r),Ce="ALLOWED_TAGS"in r?c({},r.ALLOWED_TAGS):nn,ke="ALLOWED_ATTR"in r?c({},r.ALLOWED_ATTR):xt,jt="ADD_URI_SAFE_ATTR"in r?c(F(pt),r.ADD_URI_SAFE_ATTR):pt,Le="ADD_DATA_URI_TAGS"in r?c(F(an),r.ADD_DATA_URI_TAGS):an,Ke="FORBID_CONTENTS"in r?c({},r.FORBID_CONTENTS):Dt,Ge="FORBID_TAGS"in r?c({},r.FORBID_TAGS):{},Mt="FORBID_ATTR"in r?c({},r.FORBID_ATTR):{},Ve="USE_PROFILES"in r&&r.USE_PROFILES,rn=r.ALLOW_ARIA_ATTR!==!1,At=r.ALLOW_DATA_ATTR!==!1,on=r.ALLOW_UNKNOWN_PROTOCOLS||!1,Ne=r.SAFE_FOR_TEMPLATES||!1,je=r.WHOLE_DOCUMENT||!1,Ye=r.RETURN_DOM||!1,nt=r.RETURN_DOM_FRAGMENT||!1,rt=r.RETURN_TRUSTED_TYPE||!1,Et=r.FORCE_BODY||!1,ot=r.SANITIZE_DOM!==!1,Ot=r.KEEP_CONTENT!==!1,Ue=r.IN_PLACE||!1,dt=r.ALLOWED_URI_REGEXP||dt,ft=r.NAMESPACE||Ie,r.CUSTOM_ELEMENT_HANDLING&&sn(r.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ve.tagNameCheck=r.CUSTOM_ELEMENT_HANDLING.tagNameCheck),r.CUSTOM_ELEMENT_HANDLING&&sn(r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ve.attributeNameCheck=r.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),r.CUSTOM_ELEMENT_HANDLING&&typeof r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ve.allowCustomizedBuiltInElements=r.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),tt=tt=Lt.indexOf(r.PARSER_MEDIA_TYPE)===-1?Mn:r.PARSER_MEDIA_TYPE,Je=tt==="application/xhtml+xml"?function(P){return P}:re,Ne&&(At=!1),nt&&(Ye=!0),Ve&&(Ce=c({},w(me)),ke=[],Ve.html===!0&&(c(Ce,oe),c(ke,be)),Ve.svg===!0&&(c(Ce,le),c(ke,fe),c(ke,_e)),Ve.svgFilters===!0&&(c(Ce,te),c(ke,fe),c(ke,_e)),Ve.mathMl===!0&&(c(Ce,he),c(ke,ie),c(ke,_e))),r.ADD_TAGS&&(Ce===nn&&(Ce=F(Ce)),c(Ce,r.ADD_TAGS)),r.ADD_ATTR&&(ke===xt&&(ke=F(ke)),c(ke,r.ADD_ATTR)),r.ADD_URI_SAFE_ATTR&&c(jt,r.ADD_URI_SAFE_ATTR),r.FORBID_CONTENTS&&(Ke===Dt&&(Ke=F(Ke)),c(Ke,r.FORBID_CONTENTS)),Ot&&(Ce["#text"]=!0),je&&c(Ce,["html","head","body"]),Ce.table&&(c(Ce,["tbody"]),delete Ge.tbody),H&&H(r),Ze=r)},at=c({},["mi","mo","mn","ms","mtext"]),It=c({},["foreignobject","desc","title","annotation-xml"]),ht=c({},["title","style","font","a","script"]),yt=c({},le);c(yt,te),c(yt,de);var Rt=c({},he);c(Rt,pe);var Tn=function(r){var P=_t(r);P&&P.tagName||(P={namespaceURI:Ie,tagName:"template"});var O=re(r.tagName),ue=re(P.tagName);return r.namespaceURI===$t?P.namespaceURI===Ie?O==="svg":P.namespaceURI===Ft?O==="svg"&&(ue==="annotation-xml"||at[ue]):Boolean(yt[O]):r.namespaceURI===Ft?P.namespaceURI===Ie?O==="math":P.namespaceURI===$t?O==="math"&&It[ue]:Boolean(Rt[O]):r.namespaceURI===Ie&&!(P.namespaceURI===$t&&!It[ue])&&!(P.namespaceURI===Ft&&!at[ue])&&!Rt[O]&&(ht[O]||!yt[O])},Oe=function(r){X(B.removed,{element:r});try{r.parentNode.removeChild(r)}catch{try{r.outerHTML=Qt}catch{r.remove()}}},ln=function(r,P){try{X(B.removed,{attribute:P.getAttributeNode(r),from:P})}catch{X(B.removed,{attribute:null,from:P})}if(P.removeAttribute(r),r==="is"&&!ke[r])if(Ye||nt)try{Oe(P)}catch{}else try{P.setAttribute(r,"")}catch{}},gt=function(r){var P,O;if(Et)r="<remove></remove>"+r;else{var ue=z(r,/^[\r\n\t ]+/);O=ue&&ue[0]}tt==="application/xhtml+xml"&&(r='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+r+"</body></html>");var t=$e?$e.createHTML(r):r;if(ft===Ie)try{P=new wt().parseFromString(t,tt)}catch{}if(!P||!P.documentElement){P=ct.createDocument(ft,"template",null);try{P.documentElement.innerHTML=Nt?"":t}catch{}}var e=P.body||P.documentElement;return r&&O&&e.insertBefore(ye.createTextNode(O),e.childNodes[0]||null),ft===Ie?Xt.call(P,je?"html":"body")[0]:je?P.documentElement:e},cn=function(r){return et.call(r.ownerDocument||r,r,bt.SHOW_ELEMENT|bt.SHOW_COMMENT|bt.SHOW_TEXT,null,!1)},En=function(r){return r instanceof Yt&&(typeof r.nodeName!="string"||typeof r.textContent!="string"||typeof r.removeChild!="function"||!(r.attributes instanceof vt)||typeof r.removeAttribute!="function"||typeof r.setAttribute!="function"||typeof r.namespaceURI!="string"||typeof r.insertBefore!="function")},Fe=function(r){return s(ze)==="object"?r instanceof ze:r&&s(r)==="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"},Me=function(r,P,O){xe[r]&&p(xe[r],function(ue){ue.call(B,P,O,Ze)})},un=function(r){var P;if(Me("beforeSanitizeElements",r,null),En(r)||M(/[\u0080-\uFFFF]/,r.nodeName))return Oe(r),!0;var O=Je(r.nodeName);if(Me("uponSanitizeElement",r,{tagName:O,allowedTags:Ce}),r.hasChildNodes()&&!Fe(r.firstElementChild)&&(!Fe(r.content)||!Fe(r.content.firstElementChild))&&M(/<[/\w]/g,r.innerHTML)&&M(/<[/\w]/g,r.textContent)||O==="select"&&M(/<template/i,r.innerHTML))return Oe(r),!0;if(!Ce[O]||Ge[O]){if(!Ge[O]&&dn(O)&&(ve.tagNameCheck instanceof RegExp&&M(ve.tagNameCheck,O)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(O)))return!1;if(Ot&&!Ke[O]){var ue=_t(r)||r.parentNode,t=Cn(r)||r.childNodes;if(t&&ue)for(var e=t.length-1;e>=0;--e)ue.insertBefore(Kt(t[e],!0),Zt(r))}return Oe(r),!0}return r instanceof Gt&&!Tn(r)?(Oe(r),!0):O!=="noscript"&&O!=="noembed"||!M(/<\/no(script|embed)/i,r.innerHTML)?(Ne&&r.nodeType===3&&(P=r.textContent,P=A(P,St," "),P=A(P,ut," "),r.textContent!==P&&(X(B.removed,{element:r.cloneNode()}),r.textContent=P)),Me("afterSanitizeElements",r,null),!1):(Oe(r),!0)},qt=function(r,P,O){if(ot&&(P==="id"||P==="name")&&(O in ye||O in An))return!1;if(!(At&&!Mt[P]&&M(kn,P))){if(!(rn&&M(Sn,P))){if(!ke[P]||Mt[P]){if(!(dn(r)&&(ve.tagNameCheck instanceof RegExp&&M(ve.tagNameCheck,r)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(r))&&(ve.attributeNameCheck instanceof RegExp&&M(ve.attributeNameCheck,P)||ve.attributeNameCheck instanceof Function&&ve.attributeNameCheck(P))||P==="is"&&ve.allowCustomizedBuiltInElements&&(ve.tagNameCheck instanceof RegExp&&M(ve.tagNameCheck,O)||ve.tagNameCheck instanceof Function&&ve.tagNameCheck(O))))return!1}else if(!jt[P]){if(!M(dt,A(O,tn,""))){if((P!=="src"&&P!=="xlink:href"&&P!=="href"||r==="script"||T(O,"data:")!==0||!Le[r])&&!(on&&!M(xn,A(O,tn,"")))){if(O)return!1}}}}}return!0},dn=function(r){return r.indexOf("-")>0},pn=function(r){var P,O,ue,t;Me("beforeSanitizeAttributes",r,null);var e=r.attributes;if(e){var n={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};for(t=e.length;t--;){var o=P=e[t],u=o.name,f=o.namespaceURI;if(O=u==="value"?P.value:G(P.value),ue=Je(u),n.attrName=ue,n.attrValue=O,n.keepAttr=!0,n.forceKeepAttr=void 0,Me("uponSanitizeAttribute",r,n),O=n.attrValue,!n.forceKeepAttr&&(ln(u,r),n.keepAttr))if(M(/\/>/i,O))ln(u,r);else{Ne&&(O=A(O,St," "),O=A(O,ut," "));var k=Je(r.nodeName);if(qt(k,ue,O))try{f?r.setAttributeNS(f,u,O):r.setAttribute(u,O),v(B.removed)}catch{}}}Me("afterSanitizeAttributes",r,null)}},On=function r(P){var O,ue=cn(P);for(Me("beforeSanitizeShadowDOM",P,null);O=ue.nextNode();)Me("uponSanitizeShadowNode",O,null),un(O)||(O.content instanceof Se&&r(O.content),pn(O));Me("afterSanitizeShadowDOM",P,null)};return B.sanitize=function(r,P){var O,ue,t,e,n;if((Nt=!r)&&(r="<!-->"),typeof r!="string"&&!Fe(r)){if(typeof r.toString!="function")throw Z("toString is not a function");if(typeof(r=r.toString())!="string")throw Z("dirty is not a string, aborting")}if(!B.isSupported){if(s(N.toStaticHTML)==="object"||typeof N.toStaticHTML=="function"){if(typeof r=="string")return N.toStaticHTML(r);if(Fe(r))return N.toStaticHTML(r.outerHTML)}return r}if(Tt||Ee(P),B.removed=[],typeof r=="string"&&(Ue=!1),Ue){if(r.nodeName){var o=Je(r.nodeName);if(!Ce[o]||Ge[o])throw Z("root node is forbidden and cannot be sanitized in-place")}}else if(r instanceof ze)(ue=(O=gt("<!---->")).ownerDocument.importNode(r,!0)).nodeType===1&&ue.nodeName==="BODY"||ue.nodeName==="HTML"?O=ue:O.appendChild(ue);else{if(!Ye&&!Ne&&!je&&r.indexOf("<")===-1)return $e&&rt?$e.createHTML(r):r;if(!(O=gt(r)))return Ye?null:rt?Qt:""}O&&Et&&Oe(O.firstChild);for(var u=cn(Ue?r:O);t=u.nextNode();)t.nodeType===3&&t===e||un(t)||(t.content instanceof Se&&On(t.content),pn(t),e=t);if(e=null,Ue)return r;if(Ye){if(nt)for(n=Ct.call(O.ownerDocument);O.firstChild;)n.appendChild(O.firstChild);else n=O;return ke.shadowroot&&(n=en.call(se,n,!0)),n}var f=je?O.outerHTML:O.innerHTML;return je&&Ce["!doctype"]&&O.ownerDocument&&O.ownerDocument.doctype&&O.ownerDocument.doctype.name&&M(wn,O.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+O.ownerDocument.doctype.name+`>
`+f),Ne&&(f=A(f,St," "),f=A(f,ut," ")),$e&&rt?$e.createHTML(f):f},B.setConfig=function(r){Ee(r),Tt=!0},B.clearConfig=function(){Ze=null,Tt=!1},B.isValidAttribute=function(r,P,O){Ze||Ee({});var ue=Je(r),t=Je(P);return qt(ue,t,O)},B.addHook=function(r,P){typeof P=="function"&&(xe[r]=xe[r]||[],X(xe[r],P))},B.removeHook=function(r){if(xe[r])return v(xe[r])},B.removeHooks=function(r){xe[r]&&(xe[r]=[])},B.removeAllHooks=function(){xe={}},B}()}()},729:C=>{var s=Object.prototype.hasOwnProperty,S="~";function _(){}function g(d,b,x){this.fn=d,this.context=b,this.once=x||!1}function w(d,b,x,Y,H){if(typeof x!="function")throw new TypeError("The listener must be a function");var D=new g(x,Y||d,H),ne=S?S+b:b;return d._events[ne]?d._events[ne].fn?d._events[ne]=[d._events[ne],D]:d._events[ne].push(D):(d._events[ne]=D,d._eventsCount++),d}function U(d,b){--d._eventsCount==0?d._events=new _:delete d._events[b]}function y(){this._events=new _,this._eventsCount=0}Object.create&&(_.prototype=Object.create(null),new _().__proto__||(S=!1)),y.prototype.eventNames=function(){var d,b,x=[];if(this._eventsCount===0)return x;for(b in d=this._events)s.call(d,b)&&x.push(S?b.slice(1):b);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(d)):x},y.prototype.listeners=function(d){var b=S?S+d:d,x=this._events[b];if(!x)return[];if(x.fn)return[x.fn];for(var Y=0,H=x.length,D=new Array(H);Y<H;Y++)D[Y]=x[Y].fn;return D},y.prototype.listenerCount=function(d){var b=S?S+d:d,x=this._events[b];return x?x.fn?1:x.length:0},y.prototype.emit=function(d,b,x,Y,H,D){var ne=S?S+d:d;if(!this._events[ne])return!1;var R,L,a=this._events[ne],l=arguments.length;if(a.fn){switch(a.once&&this.removeListener(d,a.fn,void 0,!0),l){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,b),!0;case 3:return a.fn.call(a.context,b,x),!0;case 4:return a.fn.call(a.context,b,x,Y),!0;case 5:return a.fn.call(a.context,b,x,Y,H),!0;case 6:return a.fn.call(a.context,b,x,Y,H,D),!0}for(L=1,R=new Array(l-1);L<l;L++)R[L-1]=arguments[L];a.fn.apply(a.context,R)}else{var p,v=a.length;for(L=0;L<v;L++)switch(a[L].once&&this.removeListener(d,a[L].fn,void 0,!0),l){case 1:a[L].fn.call(a[L].context);break;case 2:a[L].fn.call(a[L].context,b);break;case 3:a[L].fn.call(a[L].context,b,x);break;case 4:a[L].fn.call(a[L].context,b,x,Y);break;default:if(!R)for(p=1,R=new Array(l-1);p<l;p++)R[p-1]=arguments[p];a[L].fn.apply(a[L].context,R)}}return!0},y.prototype.on=function(d,b,x){return w(this,d,b,x,!1)},y.prototype.once=function(d,b,x){return w(this,d,b,x,!0)},y.prototype.removeListener=function(d,b,x,Y){var H=S?S+d:d;if(!this._events[H])return this;if(!b)return U(this,H),this;var D=this._events[H];if(D.fn)D.fn!==b||Y&&!D.once||x&&D.context!==x||U(this,H);else{for(var ne=0,R=[],L=D.length;ne<L;ne++)(D[ne].fn!==b||Y&&!D[ne].once||x&&D[ne].context!==x)&&R.push(D[ne]);R.length?this._events[H]=R.length===1?R[0]:R:U(this,H)}return this},y.prototype.removeAllListeners=function(d){var b;return d?(b=S?S+d:d,this._events[b]&&U(this,b)):(this._events=new _,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=S,y.EventEmitter=y,C.exports=y},717:C=>{typeof Object.create=="function"?C.exports=function(s,S){s.super_=S,s.prototype=Object.create(S.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:C.exports=function(s,S){s.super_=S;var _=function(){};_.prototype=S.prototype,s.prototype=new _,s.prototype.constructor=s}},824:C=>{var s=1e3,S=60*s,_=60*S,g=24*_;function w(U,y,d,b){var x=y>=1.5*d;return Math.round(U/d)+" "+b+(x?"s":"")}C.exports=function(U,y){y=y||{};var d,b,x=typeof U;if(x==="string"&&U.length>0)return function(Y){if(!((Y=String(Y)).length>100)){var H=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(Y);if(H){var D=parseFloat(H[1]);switch((H[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*D;case"weeks":case"week":case"w":return 6048e5*D;case"days":case"day":case"d":return D*g;case"hours":case"hour":case"hrs":case"hr":case"h":return D*_;case"minutes":case"minute":case"mins":case"min":case"m":return D*S;case"seconds":case"second":case"secs":case"sec":case"s":return D*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return D;default:return}}}}(U);if(x==="number"&&isFinite(U))return y.long?(d=U,(b=Math.abs(d))>=g?w(d,b,g,"day"):b>=_?w(d,b,_,"hour"):b>=S?w(d,b,S,"minute"):b>=s?w(d,b,s,"second"):d+" ms"):function(Y){var H=Math.abs(Y);return H>=g?Math.round(Y/g)+"d":H>=_?Math.round(Y/_)+"h":H>=S?Math.round(Y/S)+"m":H>=s?Math.round(Y/s)+"s":Y+"ms"}(U);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(U))}},520:(C,s,S)=>{var _=S(155),g=_.platform==="win32",w=S(539);function U(a,l){for(var p=[],v=0;v<a.length;v++){var X=a[v];X&&X!=="."&&(X===".."?p.length&&p[p.length-1]!==".."?p.pop():l&&p.push(".."):p.push(X))}return p}function y(a){for(var l=a.length-1,p=0;p<=l&&!a[p];p++);for(var v=l;v>=0&&!a[v];v--);return p===0&&v===l?a:p>v?[]:a.slice(p,v+1)}var d=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,b=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,x={};function Y(a){var l=d.exec(a),p=(l[1]||"")+(l[2]||""),v=l[3]||"",X=b.exec(v);return[p,X[1],X[2],X[3]]}function H(a){var l=d.exec(a),p=l[1]||"",v=!!p&&p[1]!==":";return{device:p,isUnc:v,isAbsolute:v||!!l[2],tail:l[3]}}function D(a){return"\\\\"+a.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}x.resolve=function(){for(var a="",l="",p=!1,v=arguments.length-1;v>=-1;v--){var X;if(v>=0?X=arguments[v]:a?(X=_.env["="+a])&&X.substr(0,3).toLowerCase()===a.toLowerCase()+"\\"||(X=a+"\\"):X=_.cwd(),!w.isString(X))throw new TypeError("Arguments to path.resolve must be strings");if(X){var re=H(X),z=re.device,A=re.isUnc,T=re.isAbsolute,G=re.tail;if((!z||!a||z.toLowerCase()===a.toLowerCase())&&(a||(a=z),p||(l=G+"\\"+l,p=T),a&&p))break}}return A&&(a=D(a)),a+(p?"\\":"")+(l=U(l.split(/[\\\/]+/),!p).join("\\"))||"."},x.normalize=function(a){var l=H(a),p=l.device,v=l.isUnc,X=l.isAbsolute,re=l.tail,z=/[\\\/]$/.test(re);return(re=U(re.split(/[\\\/]+/),!X).join("\\"))||X||(re="."),re&&z&&(re+="\\"),v&&(p=D(p)),p+(X?"\\":"")+re},x.isAbsolute=function(a){return H(a).isAbsolute},x.join=function(){for(var a=[],l=0;l<arguments.length;l++){var p=arguments[l];if(!w.isString(p))throw new TypeError("Arguments to path.join must be strings");p&&a.push(p)}var v=a.join("\\");return/^[\\\/]{2}[^\\\/]/.test(a[0])||(v=v.replace(/^[\\\/]{2,}/,"\\")),x.normalize(v)},x.relative=function(a,l){a=x.resolve(a),l=x.resolve(l);for(var p=a.toLowerCase(),v=l.toLowerCase(),X=y(l.split("\\")),re=y(p.split("\\")),z=y(v.split("\\")),A=Math.min(re.length,z.length),T=A,G=0;G<A;G++)if(re[G]!==z[G]){T=G;break}if(T==0)return l;var M=[];for(G=T;G<re.length;G++)M.push("..");return(M=M.concat(X.slice(T))).join("\\")},x._makeLong=function(a){if(!w.isString(a))return a;if(!a)return"";var l=x.resolve(a);return/^[a-zA-Z]\:\\/.test(l)?"\\\\?\\"+l:/^\\\\[^?.]/.test(l)?"\\\\?\\UNC\\"+l.substring(2):a},x.dirname=function(a){var l=Y(a),p=l[0],v=l[1];return p||v?(v&&(v=v.substr(0,v.length-1)),p+v):"."},x.basename=function(a,l){var p=Y(a)[2];return l&&p.substr(-1*l.length)===l&&(p=p.substr(0,p.length-l.length)),p},x.extname=function(a){return Y(a)[3]},x.format=function(a){if(!w.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var l=a.root||"";if(!w.isString(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);var p=a.dir,v=a.base||"";return p?p[p.length-1]===x.sep?p+v:p+x.sep+v:v},x.parse=function(a){if(!w.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var l=Y(a);if(!l||l.length!==4)throw new TypeError("Invalid path '"+a+"'");return{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},x.sep="\\",x.delimiter=";";var ne=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,R={};function L(a){return ne.exec(a).slice(1)}R.resolve=function(){for(var a="",l=!1,p=arguments.length-1;p>=-1&&!l;p--){var v=p>=0?arguments[p]:_.cwd();if(!w.isString(v))throw new TypeError("Arguments to path.resolve must be strings");v&&(a=v+"/"+a,l=v[0]==="/")}return(l?"/":"")+(a=U(a.split("/"),!l).join("/"))||"."},R.normalize=function(a){var l=R.isAbsolute(a),p=a&&a[a.length-1]==="/";return(a=U(a.split("/"),!l).join("/"))||l||(a="."),a&&p&&(a+="/"),(l?"/":"")+a},R.isAbsolute=function(a){return a.charAt(0)==="/"},R.join=function(){for(var a="",l=0;l<arguments.length;l++){var p=arguments[l];if(!w.isString(p))throw new TypeError("Arguments to path.join must be strings");p&&(a+=a?"/"+p:p)}return R.normalize(a)},R.relative=function(a,l){a=R.resolve(a).substr(1),l=R.resolve(l).substr(1);for(var p=y(a.split("/")),v=y(l.split("/")),X=Math.min(p.length,v.length),re=X,z=0;z<X;z++)if(p[z]!==v[z]){re=z;break}var A=[];for(z=re;z<p.length;z++)A.push("..");return(A=A.concat(v.slice(re))).join("/")},R._makeLong=function(a){return a},R.dirname=function(a){var l=L(a),p=l[0],v=l[1];return p||v?(v&&(v=v.substr(0,v.length-1)),p+v):"."},R.basename=function(a,l){var p=L(a)[2];return l&&p.substr(-1*l.length)===l&&(p=p.substr(0,p.length-l.length)),p},R.extname=function(a){return L(a)[3]},R.format=function(a){if(!w.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var l=a.root||"";if(!w.isString(l))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);return(a.dir?a.dir+R.sep:"")+(a.base||"")},R.parse=function(a){if(!w.isString(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var l=L(a);if(!l||l.length!==4)throw new TypeError("Invalid path '"+a+"'");return l[1]=l[1]||"",l[2]=l[2]||"",l[3]=l[3]||"",{root:l[0],dir:l[0]+l[1].slice(0,-1),base:l[2],ext:l[3],name:l[2].slice(0,l[2].length-l[3].length)}},R.sep="/",R.delimiter=":",C.exports=g?x:R,C.exports.posix=R,C.exports.win32=x},155:C=>{var s,S,_=C.exports={};function g(){throw new Error("setTimeout has not been defined")}function w(){throw new Error("clearTimeout has not been defined")}function U(R){if(s===setTimeout)return setTimeout(R,0);if((s===g||!s)&&setTimeout)return s=setTimeout,setTimeout(R,0);try{return s(R,0)}catch{try{return s.call(null,R,0)}catch{return s.call(this,R,0)}}}(function(){try{s=typeof setTimeout=="function"?setTimeout:g}catch{s=g}try{S=typeof clearTimeout=="function"?clearTimeout:w}catch{S=w}})();var y,d=[],b=!1,x=-1;function Y(){b&&y&&(b=!1,y.length?d=y.concat(d):x=-1,d.length&&H())}function H(){if(!b){var R=U(Y);b=!0;for(var L=d.length;L;){for(y=d,d=[];++x<L;)y&&y[x].run();x=-1,L=d.length}y=null,b=!1,function(a){if(S===clearTimeout)return clearTimeout(a);if((S===w||!S)&&clearTimeout)return S=clearTimeout,clearTimeout(a);try{S(a)}catch{try{return S.call(null,a)}catch{return S.call(this,a)}}}(R)}}function D(R,L){this.fun=R,this.array=L}function ne(){}_.nextTick=function(R){var L=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)L[a-1]=arguments[a];d.push(new D(R,L)),d.length!==1||b||U(H)},D.prototype.run=function(){this.fun.apply(null,this.array)},_.title="browser",_.browser=!0,_.env={},_.argv=[],_.version="",_.versions={},_.on=ne,_.addListener=ne,_.once=ne,_.off=ne,_.removeListener=ne,_.removeAllListeners=ne,_.emit=ne,_.prependListener=ne,_.prependOnceListener=ne,_.listeners=function(R){return[]},_.binding=function(R){throw new Error("process.binding is not supported")},_.cwd=function(){return"/"},_.chdir=function(R){throw new Error("process.chdir is not supported")},_.umask=function(){return 0}},384:C=>{C.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},539:(C,s,S)=>{var _=S(155),g=/%[sdj%]/g;s.format=function(i){if(!a(i)){for(var c=[],F=0;F<arguments.length;F++)c.push(y(arguments[F]));return c.join(" ")}F=1;for(var K=arguments,oe=K.length,le=String(i).replace(g,function(de){if(de==="%%")return"%";if(F>=oe)return de;switch(de){case"%s":return String(K[F++]);case"%d":return Number(K[F++]);case"%j":try{return JSON.stringify(K[F++])}catch{return"[Circular]"}default:return de}}),te=K[F];F<oe;te=K[++F])R(te)||!v(te)?le+=" "+te:le+=" "+y(te);return le},s.deprecate=function(i,c){if(l(S.g.process))return function(){return s.deprecate(i,c).apply(this,arguments)};if(_.noDeprecation===!0)return i;var F=!1;return function(){if(!F){if(_.throwDeprecation)throw new Error(c);_.traceDeprecation?console.trace(c):console.error(c),F=!0}return i.apply(this,arguments)}};var w,U={};function y(i,c){var F={seen:[],stylize:b};return arguments.length>=3&&(F.depth=arguments[2]),arguments.length>=4&&(F.colors=arguments[3]),ne(c)?F.showHidden=c:c&&s._extend(F,c),l(F.showHidden)&&(F.showHidden=!1),l(F.depth)&&(F.depth=2),l(F.colors)&&(F.colors=!1),l(F.customInspect)&&(F.customInspect=!0),F.colors&&(F.stylize=d),x(F,i,F.depth)}function d(i,c){var F=y.styles[c];return F?"\x1B["+y.colors[F][0]+"m"+i+"\x1B["+y.colors[F][1]+"m":i}function b(i,c){return i}function x(i,c,F){if(i.customInspect&&c&&z(c.inspect)&&c.inspect!==s.inspect&&(!c.constructor||c.constructor.prototype!==c)){var K=c.inspect(F,i);return a(K)||(K=x(i,K,F)),K}var oe=function(fe,ie){if(l(ie))return fe.stylize("undefined","undefined");if(a(ie)){var _e="'"+JSON.stringify(ie).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return fe.stylize(_e,"string")}return L(ie)?fe.stylize(""+ie,"number"):ne(ie)?fe.stylize(""+ie,"boolean"):R(ie)?fe.stylize("null","null"):void 0}(i,c);if(oe)return oe;var le=Object.keys(c),te=function(fe){var ie={};return fe.forEach(function(_e,De){ie[_e]=!0}),ie}(le);if(i.showHidden&&(le=Object.getOwnPropertyNames(c)),re(c)&&(le.indexOf("message")>=0||le.indexOf("description")>=0))return Y(c);if(le.length===0){if(z(c)){var de=c.name?": "+c.name:"";return i.stylize("[Function"+de+"]","special")}if(p(c))return i.stylize(RegExp.prototype.toString.call(c),"regexp");if(X(c))return i.stylize(Date.prototype.toString.call(c),"date");if(re(c))return Y(c)}var he,pe="",me=!1,be=["{","}"];return D(c)&&(me=!0,be=["[","]"]),z(c)&&(pe=" [Function"+(c.name?": "+c.name:"")+"]"),p(c)&&(pe=" "+RegExp.prototype.toString.call(c)),X(c)&&(pe=" "+Date.prototype.toUTCString.call(c)),re(c)&&(pe=" "+Y(c)),le.length!==0||me&&c.length!=0?F<0?p(c)?i.stylize(RegExp.prototype.toString.call(c),"regexp"):i.stylize("[Object]","special"):(i.seen.push(c),he=me?function(fe,ie,_e,De,Be){for(var qe=[],Pe=0,it=ie.length;Pe<it;++Pe)Z(ie,String(Pe))?qe.push(H(fe,ie,_e,De,String(Pe),!0)):qe.push("");return Be.forEach(function(Qe){Qe.match(/^\d+$/)||qe.push(H(fe,ie,_e,De,Qe,!0))}),qe}(i,c,F,te,le):le.map(function(fe){return H(i,c,F,te,fe,me)}),i.seen.pop(),function(fe,ie,_e){return fe.reduce(function(De,Be){return Be.indexOf(`
`),De+Be.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?_e[0]+(ie===""?"":ie+`
 `)+" "+fe.join(`,
  `)+" "+_e[1]:_e[0]+ie+" "+fe.join(", ")+" "+_e[1]}(he,pe,be)):be[0]+pe+be[1]}function Y(i){return"["+Error.prototype.toString.call(i)+"]"}function H(i,c,F,K,oe,le){var te,de,he;if((he=Object.getOwnPropertyDescriptor(c,oe)||{value:c[oe]}).get?de=he.set?i.stylize("[Getter/Setter]","special"):i.stylize("[Getter]","special"):he.set&&(de=i.stylize("[Setter]","special")),Z(K,oe)||(te="["+oe+"]"),de||(i.seen.indexOf(he.value)<0?(de=R(F)?x(i,he.value,null):x(i,he.value,F-1)).indexOf(`
`)>-1&&(de=le?de.split(`
`).map(function(pe){return"  "+pe}).join(`
`).substr(2):`
`+de.split(`
`).map(function(pe){return"   "+pe}).join(`
`)):de=i.stylize("[Circular]","special")),l(te)){if(le&&oe.match(/^\d+$/))return de;(te=JSON.stringify(""+oe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(te=te.substr(1,te.length-2),te=i.stylize(te,"name")):(te=te.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),te=i.stylize(te,"string"))}return te+": "+de}function D(i){return Array.isArray(i)}function ne(i){return typeof i=="boolean"}function R(i){return i===null}function L(i){return typeof i=="number"}function a(i){return typeof i=="string"}function l(i){return i===void 0}function p(i){return v(i)&&A(i)==="[object RegExp]"}function v(i){return typeof i=="object"&&i!==null}function X(i){return v(i)&&A(i)==="[object Date]"}function re(i){return v(i)&&(A(i)==="[object Error]"||i instanceof Error)}function z(i){return typeof i=="function"}function A(i){return Object.prototype.toString.call(i)}function T(i){return i<10?"0"+i.toString(10):i.toString(10)}s.debuglog=function(i){if(l(w)&&(w=_.env.NODE_DEBUG||""),i=i.toUpperCase(),!U[i])if(new RegExp("\\b"+i+"\\b","i").test(w)){var c=_.pid;U[i]=function(){var F=s.format.apply(s,arguments);console.error("%s %d: %s",i,c,F)}}else U[i]=function(){};return U[i]},s.inspect=y,y.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},y.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},s.isArray=D,s.isBoolean=ne,s.isNull=R,s.isNullOrUndefined=function(i){return i==null},s.isNumber=L,s.isString=a,s.isSymbol=function(i){return typeof i=="symbol"},s.isUndefined=l,s.isRegExp=p,s.isObject=v,s.isDate=X,s.isError=re,s.isFunction=z,s.isPrimitive=function(i){return i===null||typeof i=="boolean"||typeof i=="number"||typeof i=="string"||typeof i=="symbol"||i===void 0},s.isBuffer=S(384);var G=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function M(){var i=new Date,c=[T(i.getHours()),T(i.getMinutes()),T(i.getSeconds())].join(":");return[i.getDate(),G[i.getMonth()],c].join(" ")}function Z(i,c){return Object.prototype.hasOwnProperty.call(i,c)}s.log=function(){console.log("%s - %s",M(),s.format.apply(s,arguments))},s.inherits=S(717),s._extend=function(i,c){if(!c||!v(c))return i;for(var F=Object.keys(c),K=F.length;K--;)i[F[K]]=c[F[K]];return i}}},q={};function h(C){var s=q[C];if(s!==void 0)return s.exports;var S=q[C]={exports:{}};return I[C].call(S.exports,S,S.exports,h),S.exports}h.n=C=>{var s=C&&C.__esModule?()=>C.default:()=>C;return h.d(s,{a:s}),s},h.d=(C,s)=>{for(var S in s)h.o(s,S)&&!h.o(C,S)&&Object.defineProperty(C,S,{enumerable:!0,get:s[S]})},h.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),h.o=(C,s)=>Object.prototype.hasOwnProperty.call(C,s),h.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var j={};return(()=>{h.r(j),h.d(j,{LSPluginUser:()=>O,setupPluginUserInstance:()=>ue});var C=h(520);h(856);const s=function(t,e){return t===e||t!=t&&e!=e},S=function(t,e){for(var n=t.length;n--;)if(s(t[n][0],e))return n;return-1};var _=Array.prototype.splice;function g(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}g.prototype.clear=function(){this.__data__=[],this.size=0},g.prototype.delete=function(t){var e=this.__data__,n=S(e,t);return!(n<0||(n==e.length-1?e.pop():_.call(e,n,1),--this.size,0))},g.prototype.get=function(t){var e=this.__data__,n=S(e,t);return n<0?void 0:e[n][1]},g.prototype.has=function(t){return S(this.__data__,t)>-1},g.prototype.set=function(t,e){var n=this.__data__,o=S(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this};const w=g,U=typeof mt=="object"&&mt&&mt.Object===Object&&mt;var y=typeof self=="object"&&self&&self.Object===Object&&self;const d=U||y||Function("return this")(),b=d.Symbol;var x=Object.prototype,Y=x.hasOwnProperty,H=x.toString,D=b?b.toStringTag:void 0,ne=Object.prototype.toString,R=b?b.toStringTag:void 0;const L=function(t){return t==null?t===void 0?"[object Undefined]":"[object Null]":R&&R in Object(t)?function(e){var n=Y.call(e,D),o=e[D];try{e[D]=void 0;var u=!0}catch{}var f=H.call(e);return u&&(n?e[D]=o:delete e[D]),f}(t):function(e){return ne.call(e)}(t)},a=function(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")},l=function(t){if(!a(t))return!1;var e=L(t);return e=="[object Function]"||e=="[object GeneratorFunction]"||e=="[object AsyncFunction]"||e=="[object Proxy]"},p=d["__core-js_shared__"];var v,X=(v=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+v:"",re=Function.prototype.toString,z=/^\[object .+?Constructor\]$/,A=Function.prototype,T=Object.prototype,G=A.toString,M=T.hasOwnProperty,Z=RegExp("^"+G.call(M).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const i=function(t){return!(!a(t)||(e=t,X&&X in e))&&(l(t)?Z:z).test(function(n){if(n!=null){try{return re.call(n)}catch{}try{return n+""}catch{}}return""}(t));var e},c=function(t,e){var n=function(o,u){return o?.[u]}(t,e);return i(n)?n:void 0},F=c(d,"Map"),K=c(Object,"create");var oe=Object.prototype.hasOwnProperty,le=Object.prototype.hasOwnProperty;function te(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}te.prototype.clear=function(){this.__data__=K?K(null):{},this.size=0},te.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},te.prototype.get=function(t){var e=this.__data__;if(K){var n=e[t];return n==="__lodash_hash_undefined__"?void 0:n}return oe.call(e,t)?e[t]:void 0},te.prototype.has=function(t){var e=this.__data__;return K?e[t]!==void 0:le.call(e,t)},te.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=K&&e===void 0?"__lodash_hash_undefined__":e,this};const de=te,he=function(t,e){var n,o,u=t.__data__;return((o=typeof(n=e))=="string"||o=="number"||o=="symbol"||o=="boolean"?n!=="__proto__":n===null)?u[typeof e=="string"?"string":"hash"]:u.map};function pe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}pe.prototype.clear=function(){this.size=0,this.__data__={hash:new de,map:new(F||w),string:new de}},pe.prototype.delete=function(t){var e=he(this,t).delete(t);return this.size-=e?1:0,e},pe.prototype.get=function(t){return he(this,t).get(t)},pe.prototype.has=function(t){return he(this,t).has(t)},pe.prototype.set=function(t,e){var n=he(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this};const me=pe;function be(t){var e=this.__data__=new w(t);this.size=e.size}be.prototype.clear=function(){this.__data__=new w,this.size=0},be.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},be.prototype.get=function(t){return this.__data__.get(t)},be.prototype.has=function(t){return this.__data__.has(t)},be.prototype.set=function(t,e){var n=this.__data__;if(n instanceof w){var o=n.__data__;if(!F||o.length<199)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new me(o)}return n.set(t,e),this.size=n.size,this};const fe=be,ie=function(){try{var t=c(Object,"defineProperty");return t({},"",{}),t}catch{}}(),_e=function(t,e,n){e=="__proto__"&&ie?ie(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},De=function(t,e,n){(n!==void 0&&!s(t[e],n)||n===void 0&&!(e in t))&&_e(t,e,n)},Be=function(t,e,n){for(var o=-1,u=Object(t),f=n(t),k=f.length;k--;){var J=f[++o];if(e(u[J],J,u)===!1)break}return t};var qe=m&&!m.nodeType&&m,Pe=qe&&!0&&E&&!E.nodeType&&E,it=Pe&&Pe.exports===qe?d.Buffer:void 0,Qe=it?it.allocUnsafe:void 0;const Bt=d.Uint8Array,wn=function(t,e){var n,o,u=e?(n=t.buffer,o=new n.constructor(n.byteLength),new Bt(o).set(new Bt(n)),o):t.buffer;return new t.constructor(u,t.byteOffset,t.length)};var Wt=Object.create;const _n=function(){function t(){}return function(e){if(!a(e))return{};if(Wt)return Wt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Q=(N=Object.getPrototypeOf,B=Object,function(t){return N(B(t))});var N,B,se=Object.prototype;const ye=function(t){var e=t&&t.constructor;return t===(typeof e=="function"&&e.prototype||se)},Se=function(t){return t!=null&&typeof t=="object"},We=function(t){return Se(t)&&L(t)=="[object Arguments]"};var ze=Object.prototype,Gt=ze.hasOwnProperty,bt=ze.propertyIsEnumerable;const st=We(function(){return arguments}())?We:function(t){return Se(t)&&Gt.call(t,"callee")&&!bt.call(t,"callee")},vt=Array.isArray,Yt=function(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=9007199254740991},wt=function(t){return t!=null&&Yt(t.length)&&!l(t)};var Vt=m&&!m.nodeType&&m,Xe=Vt&&!0&&E&&!E.nodeType&&E,Kt=Xe&&Xe.exports===Vt?d.Buffer:void 0;const Zt=(Kt?Kt.isBuffer:void 0)||function(){return!1};var Cn=Function.prototype,_t=Object.prototype,lt=Cn.toString,$e=_t.hasOwnProperty,Qt=lt.call(Object),ce={};ce["[object Float32Array]"]=ce["[object Float64Array]"]=ce["[object Int8Array]"]=ce["[object Int16Array]"]=ce["[object Int32Array]"]=ce["[object Uint8Array]"]=ce["[object Uint8ClampedArray]"]=ce["[object Uint16Array]"]=ce["[object Uint32Array]"]=!0,ce["[object Arguments]"]=ce["[object Array]"]=ce["[object ArrayBuffer]"]=ce["[object Boolean]"]=ce["[object DataView]"]=ce["[object Date]"]=ce["[object Error]"]=ce["[object Function]"]=ce["[object Map]"]=ce["[object Number]"]=ce["[object Object]"]=ce["[object RegExp]"]=ce["[object Set]"]=ce["[object String]"]=ce["[object WeakMap]"]=!1;var ct=m&&!m.nodeType&&m,et=ct&&!0&&E&&!E.nodeType&&E,Ct=et&&et.exports===ct&&U.process,Xt=function(){try{return et&&et.require&&et.require("util").types||Ct&&Ct.binding&&Ct.binding("util")}catch{}}(),en=Xt&&Xt.isTypedArray;const kt=en?function(t){return function(e){return t(e)}}(en):function(t){return Se(t)&&Yt(t.length)&&!!ce[L(t)]},xe=function(t,e){if((e!=="constructor"||typeof t[e]!="function")&&e!="__proto__")return t[e]};var tt=Object.prototype.hasOwnProperty;const Je=function(t,e,n){var o=t[e];tt.call(t,e)&&s(o,n)&&(n!==void 0||e in t)||_e(t,e,n)};var St=/^(?:0|[1-9]\d*)$/;const ut=function(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&(n=="number"||n!="symbol"&&St.test(t))&&t>-1&&t%1==0&&t<e};var kn=Object.prototype.hasOwnProperty;const Sn=function(t,e){var n=vt(t),o=!n&&st(t),u=!n&&!o&&Zt(t),f=!n&&!o&&!u&&kt(t),k=n||o||u||f,J=k?function(ee,V){for(var ae=-1,we=Array(ee);++ae<ee;)we[ae]=V(ae);return we}(t.length,String):[],W=J.length;for(var $ in t)!e&&!kn.call(t,$)||k&&($=="length"||u&&($=="offset"||$=="parent")||f&&($=="buffer"||$=="byteLength"||$=="byteOffset")||ut($,W))||J.push($);return J};var xn=Object.prototype.hasOwnProperty;const tn=function(t){if(!a(t))return function(u){var f=[];if(u!=null)for(var k in Object(u))f.push(k);return f}(t);var e=ye(t),n=[];for(var o in t)(o!="constructor"||!e&&xn.call(t,o))&&n.push(o);return n},dt=function(t){return wt(t)?Sn(t,!0):tn(t)},Ce=function(t){return function(e,n,o,u){var f=!o;o||(o={});for(var k=-1,J=n.length;++k<J;){var W=n[k],$=u?u(o[W],e[W],W,o,e):void 0;$===void 0&&($=e[W]),f?_e(o,W,$):Je(o,W,$)}return o}(t,dt(t))},nn=function(t,e,n,o,u,f,k){var J,W=xe(t,n),$=xe(e,n),ee=k.get($);if(ee)De(t,n,ee);else{var V=f?f(W,$,n+"",t,e,k):void 0,ae=V===void 0;if(ae){var we=vt($),Re=!we&&Zt($),He=!we&&!Re&&kt($);V=$,we||Re||He?vt(W)?V=W:Se(J=W)&&wt(J)?V=function(ge,Te){var Ae=-1,Pt=ge.length;for(Te||(Te=Array(Pt));++Ae<Pt;)Te[Ae]=ge[Ae];return Te}(W):Re?(ae=!1,V=function(ge,Te){if(Te)return ge.slice();var Ae=ge.length,Pt=Qe?Qe(Ae):new ge.constructor(Ae);return ge.copy(Pt),Pt}($,!0)):He?(ae=!1,V=wn($,!0)):V=[]:function(ge){if(!Se(ge)||L(ge)!="[object Object]")return!1;var Te=Q(ge);if(Te===null)return!0;var Ae=$e.call(Te,"constructor")&&Te.constructor;return typeof Ae=="function"&&Ae instanceof Ae&&lt.call(Ae)==Qt}($)||st($)?(V=W,st(W)?V=Ce(W):a(W)&&!l(W)||(V=function(ge){return typeof ge.constructor!="function"||ye(ge)?{}:_n(Q(ge))}($))):ae=!1}ae&&(k.set($,V),u(V,$,o,f,k),k.delete($)),De(t,n,V)}},ke=function t(e,n,o,u,f){e!==n&&Be(n,function(k,J){if(f||(f=new fe),a(k))nn(e,n,J,o,t,u,f);else{var W=u?u(xe(e,J),k,J+"",e,n,f):void 0;W===void 0&&(W=k),De(e,J,W)}},dt)},xt=function(t){return t},ve=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var Ge=Math.max;const Mt=ie?function(t,e){return ie(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:xt;var rn=Date.now;const At=function(t){var e=0,n=0;return function(){var o=rn(),u=16-(o-n);if(n=o,u>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Mt),on=(Ne=function(t,e,n){ke(t,e,n)},function(t,e){return At(function(n,o,u){return o=Ge(o===void 0?n.length-1:o,0),function(){for(var f=arguments,k=-1,J=Ge(f.length-o,0),W=Array(J);++k<J;)W[k]=f[o+k];k=-1;for(var $=Array(o+1);++k<o;)$[k]=f[k];return $[o]=u(W),ve(n,this,$)}}(t,e,xt),t+"")}(function(t,e){var n=-1,o=e.length,u=o>1?e[o-1]:void 0,f=o>2?e[2]:void 0;for(u=Ne.length>3&&typeof u=="function"?(o--,u):void 0,f&&function(J,W,$){if(!a($))return!1;var ee=typeof W;return!!(ee=="number"?wt($)&&ut(W,$.length):ee=="string"&&W in $)&&s($[W],J)}(e[0],e[1],f)&&(u=o<3?void 0:u,o=1),t=Object(t);++n<o;){var k=e[n];k&&Ne(t,k,n)}return t}));var Ne,je=function(){return(je=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var u in e=arguments[n])Object.prototype.hasOwnProperty.call(e,u)&&(t[u]=e[u]);return t}).apply(this,arguments)};function Tt(t){return t.toLowerCase()}var Et=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],Ye=/[^A-Z0-9]+/gi;function nt(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce(function(o,u){return o.replace(u,n)},t)}const rt=navigator.platform.toLowerCase()==="win32"?C.win32:C.posix,ot=function(t,e){return e===void 0&&(e={}),function(n,o){return o===void 0&&(o={}),function(u,f){f===void 0&&(f={});for(var k=f.splitRegexp,J=k===void 0?Et:k,W=f.stripRegexp,$=W===void 0?Ye:W,ee=f.transform,V=ee===void 0?Tt:ee,ae=f.delimiter,we=ae===void 0?" ":ae,Re=nt(nt(u,J,"$1\0$2"),$,"\0"),He=0,ge=Re.length;Re.charAt(He)==="\0";)He++;for(;Re.charAt(ge-1)==="\0";)ge--;return Re.slice(He,ge).split("\0").map(V).join(we)}(n,je({delimiter:"."},o))}(t,je({delimiter:"_"},e))},Ot=on;function Ue(t,e){let n,o,u=!1;const f=J=>W=>{t&&clearTimeout(t),J(W),u=!0},k=new Promise((J,W)=>{n=f(J),o=f(W),t&&(t=setTimeout(()=>o(new Error(`[deferred timeout] ${e}`)),t))});return{created:Date.now(),setTag:J=>e=J,resolve:n,reject:o,promise:k,get settled(){return u}}}const Ve=new Map;window.__injectedUIEffects=Ve;var Ke=h(227),Dt=h.n(Ke);const Le="application/x-postmate-v1+json";let an=0;const jt={handshake:1,"handshake-reply":1,call:1,emit:1,reply:1,request:1},pt=(t,e)=>!(typeof e=="string"&&t.origin!==e||!t.data||typeof t.data=="object"&&!("postmate"in t.data)||t.data.type!==Le||!jt[t.data.postmate]);class Ft{parent;frame;child;events={};childOrigin;listener;constructor(e){this.parent=e.parent,this.frame=e.frame,this.child=e.child,this.childOrigin=e.childOrigin,this.listener=n=>{if(!pt(n,this.childOrigin))return!1;const{data:o,name:u}=((n||{}).data||{}).value||{};n.data.postmate==="emit"&&u in this.events&&this.events[u].forEach(f=>{f.call(this,o)})},this.parent.addEventListener("message",this.listener,!1)}get(e){return new Promise(n=>{const o=++an,u=f=>{f.data.uid===o&&f.data.postmate==="reply"&&(this.parent.removeEventListener("message",u,!1),n(f.data.value))};this.parent.addEventListener("message",u,!1),this.child.postMessage({postmate:"request",type:Le,property:e,uid:o},this.childOrigin)})}call(e,n){this.child.postMessage({postmate:"call",type:Le,property:e,data:n},this.childOrigin)}on(e,n){this.events[e]||(this.events[e]=[]),this.events[e].push(n)}destroy(){window.removeEventListener("message",this.listener,!1),this.frame.parentNode.removeChild(this.frame)}}class $t{model;parent;parentOrigin;child;constructor(e){this.model=e.model,this.parent=e.parent,this.parentOrigin=e.parentOrigin,this.child=e.child,this.child.addEventListener("message",n=>{if(!pt(n,this.parentOrigin))return;const{property:o,uid:u,data:f}=n.data;n.data.postmate!=="call"?((k,J)=>{const W=typeof k[J]=="function"?k[J]():k[J];return Promise.resolve(W)})(this.model,o).then(k=>{n.source.postMessage({property:o,postmate:"reply",type:Le,uid:u,value:k},n.origin)}):o in this.model&&typeof this.model[o]=="function"&&this.model[o](f)})}emit(e,n){this.parent.postMessage({postmate:"emit",type:Le,value:{name:e,data:n}},this.parentOrigin)}}class Ie{static debug=!1;container;parent;frame;child;childOrigin;url;model;static Model;constructor(e){this.container=e.container,this.url=e.url,this.parent=window,this.frame=document.createElement("iframe"),e.id&&(this.frame.id=e.id),e.name&&(this.frame.name=e.name),this.frame.classList.add.apply(this.frame.classList,e.classListArray||[]),this.container.appendChild(this.frame),this.child=this.frame.contentWindow,this.model=e.model||{}}sendHandshake(e){const n=(f=>{const k=document.createElement("a");k.href=f;const J=k.protocol.length>4?k.protocol:window.location.protocol,W=k.host.length?k.port==="80"||k.port==="443"?k.hostname:k.host:window.location.host;return k.origin||`${J}//${W}`})(e=e||this.url);let o,u=0;return new Promise((f,k)=>{const J=$=>!!pt($,n)&&($.data.postmate==="handshake-reply"?(clearInterval(o),this.parent.removeEventListener("message",J,!1),this.childOrigin=$.origin,f(new Ft(this))):k("Failed handshake"));this.parent.addEventListener("message",J,!1);const W=()=>{u++,this.child.postMessage({postmate:"handshake",type:Le,model:this.model},n),u===5&&clearInterval(o)};this.frame.addEventListener("load",()=>{W(),o=setInterval(W,500)}),this.frame.src=e})}}class ft{child;model;parent;parentOrigin;constructor(e){this.child=window,this.model=e,this.parent=this.child.parent}sendHandshakeReply(){return new Promise((e,n)=>{const o=u=>{if(u.data.postmate){if(u.data.postmate==="handshake"){this.child.removeEventListener("message",o,!1),u.source.postMessage({postmate:"handshake-reply",type:Le},u.origin),this.parentOrigin=u.origin;const f=u.data.model;return f&&Object.keys(f).forEach(k=>{this.model[k]=f[k]}),e(new $t(this))}return n("Handshake Reply Failed")}};this.child.addEventListener("message",o,!1)})}}var Nt=h(729),Lt=h.n(Nt);const{importHTML:Mn,createSandboxContainer:Ze}=window.QSandbox||{};function An(t,e){return t.startsWith("http")?fetch(t,e):(t=t.replace("file://",""),new Promise(async(n,o)=>{try{const u=await window.apis.doAction(["readFile",t]);n({text:()=>u})}catch(u){console.error(u),o(u)}}))}class sn extends Lt(){_pluginLocal;_frame;_root;_loaded=!1;_unmountFns=[];constructor(e){super(),this._pluginLocal=e,e._dispose(()=>{this._unmount()})}async load(){const{name:e,entry:n}=this._pluginLocal.options;if(this.loaded||!n)return;const{template:o,execScripts:u}=await Mn(n,{fetch:An});this._mount(o,document.body);const f=Ze(e,{elementGetter:()=>this._root?.firstChild}).instance.proxy;f.__shadow_mode__=!0,f.LSPluginLocal=this._pluginLocal,f.LSPluginShadow=this,f.LSPluginUser=f.logseq=new O(this._pluginLocal.toJSON(),this._pluginLocal.caller);const k=await u(f,!0);this._unmountFns.push(k.unmount),this._loaded=!0}_mount(e,n){const o=this._frame=document.createElement("div");o.classList.add("lsp-shadow-sandbox"),o.id=this._pluginLocal.id,this._root=o.attachShadow({mode:"open"}),this._root.innerHTML=`<div>${e}</div>`,n.appendChild(o),this.emit("mounted")}_unmount(){for(const e of this._unmountFns)e&&e.call(null)}destroy(){this.frame?.parentNode?.removeChild(this.frame)}get loaded(){return this._loaded}get document(){return this._root?.firstChild}get frame(){return this._frame}}const Ee=Dt()("LSPlugin:caller"),at="#await#response#",It="#lspmsg#error#",ht=t=>`#lspmsg#${t}`;class yt extends Lt(){_pluginLocal;_connected=!1;_parent;_child;_shadow;_status;_userModel={};_call;_callUserModel;_debugTag="";constructor(e){super(),this._pluginLocal=e,e&&(this._debugTag=e.debugTag)}async connectToChild(){if(this._connected)return;const{shadow:e}=this._pluginLocal;e?await this._setupShadowSandbox():await this._setupIframeSandbox()}async connectToParent(e={}){if(this._connected)return;const n=this,o=this._pluginLocal!=null;let u=0;const f=new Map,k=Ue(5e3),J=this._extendUserModel({"#lspmsg#ready#":async $=>{J[ht($?.pid)]=({type:ee,payload:V})=>{Ee(`[host (_call) -> *user] ${this._debugTag}`,ee,V),n.emit(ee,V)},await k.resolve()},"#lspmsg#beforeunload#":async $=>{const ee=Ue(1e4);n.emit("beforeunload",Object.assign({actor:ee},$)),await ee.promise},"#lspmsg#settings#":async({type:$,payload:ee})=>{n.emit("settings:changed",ee)},"#lspmsg#":async({ns:$,type:ee,payload:V})=>{Ee(`[host (async) -> *user] ${this._debugTag} ns=${$} type=${ee}`,V),$&&$.startsWith("hook")?n.emit(`${$}:${ee}`,V):n.emit(ee,V)},"#lspmsg#reply#":({_sync:$,result:ee})=>{if(Ee(`[sync host -> *user] #${$}`,ee),f.has($)){const V=f.get($);V&&(ee?.hasOwnProperty(It)?V.reject(ee[It]):V.resolve(ee),f.delete($))}},...e});if(o)return await k.promise,JSON.parse(JSON.stringify(this._pluginLocal?.toJSON()));const W=new ft(J).sendHandshakeReply();return this._status="pending",await W.then($=>{this._child=$,this._connected=!0,this._call=async(ee,V={},ae)=>{if(ae){const we=++u;f.set(we,ae),V._sync=we,ae.setTag(`async call #${we}`),Ee(`async call #${we}`)}return $.emit(ht(J.baseInfo.id),{type:ee,payload:V}),ae?.promise},this._callUserModel=async(ee,V)=>{try{J[ee](V)}catch{Ee(`[model method] #${ee} not existed`)}},setInterval(()=>{if(f.size>100)for(const[ee,V]of f)V.settled&&f.delete(ee)},18e5)}).finally(()=>{this._status=void 0}),await k.promise,J.baseInfo}async call(e,n={}){return this._call?.call(this,e,n)}async callAsync(e,n={}){const o=Ue(1e4);return this._call?.call(this,e,n,o)}async callUserModel(e,n={}){return this._callUserModel?.call(this,e,n)}async _setupIframeSandbox(){const e=this._pluginLocal,n=e.id,o=`${n}_lsp_main`,u=new URL(e.options.entry);u.searchParams.set("__v__",e.options.version);const f=document.querySelector(`#${o}`);f&&f.parentElement.removeChild(f);const k=document.createElement("div");k.classList.add("lsp-iframe-sandbox-container"),k.id=o,k.dataset.pid=n;try{const $=(await this._pluginLocal._loadLayoutsData())?.$$0;if($){k.dataset.inited_layout="true";const{width:ee,height:V,left:ae,top:we}=$;Object.assign(k.style,{width:ee+"px",height:V+"px",left:ae+"px",top:we+"px"})}}catch($){console.error("[Restore Layout Error]",$)}document.body.appendChild(k);let J,W=new Ie({id:n+"_iframe",container:k,url:u.href,classListArray:["lsp-iframe-sandbox"],model:{baseInfo:JSON.parse(JSON.stringify(e.toJSON()))}}).sendHandshake();return this._status="pending",new Promise(($,ee)=>{J=setTimeout(()=>{ee(new Error("handshake Timeout"))},8e3),W.then(V=>{this._parent=V,this._connected=!0,this.emit("connected"),V.on(ht(e.id),({type:ae,payload:we})=>{Ee("[user -> *host] ",ae,we),this._pluginLocal?.emit(ae,we||{})}),this._call=async(...ae)=>{await V.call(ht(e.id),{type:ae[0],payload:Object.assign(ae[1]||{},{$$pid:e.id})})},this._callUserModel=async(ae,we)=>{if(ae.startsWith(at))return await V.get(ae.replace(at,""));V.call(ae,we)},$(null)}).catch(V=>{ee(V)}).finally(()=>{clearTimeout(J)})}).catch($=>{throw Ee("[iframe sandbox] error",$),$}).finally(()=>{this._status=void 0})}async _setupShadowSandbox(){const e=this._pluginLocal,n=this._shadow=new sn(e);try{this._status="pending",await n.load(),this._connected=!0,this.emit("connected"),this._call=async(o,u={},f)=>(f&&(u.actor=f),this._pluginLocal?.emit(o,Object.assign(u,{$$pid:e.id})),f?.promise),this._callUserModel=async(...o)=>{let u=o[0];u?.startsWith(at)&&(u=u.replace(at,""));const f=o[1]||{},k=this._userModel[u];typeof k=="function"&&await k.call(null,f)}}catch(o){throw Ee("[shadow sandbox] error",o),o}finally{this._status=void 0}}_extendUserModel(e){return Object.assign(this._userModel,e)}_getSandboxIframeContainer(){return this._parent?.frame.parentNode}_getSandboxShadowContainer(){return this._shadow?.frame.parentNode}_getSandboxIframeRoot(){return this._parent?.frame}_getSandboxShadowRoot(){return this._shadow?.frame}set debugTag(e){this._debugTag=e}async destroy(){let e=null;this._parent&&(e=this._getSandboxIframeContainer(),await this._parent.destroy()),this._shadow&&(e=this._getSandboxShadowContainer(),this._shadow.destroy()),e?.parentNode.removeChild(e)}}class Rt{ctx;constructor(e){this.ctx=e}get ctxId(){return this.ctx.baseInfo.id}setItem(e,n){return this.ctx.caller.callAsync("api:call",{method:"write-plugin-storage-file",args:[this.ctxId,e,n]})}getItem(e){return this.ctx.caller.callAsync("api:call",{method:"read-plugin-storage-file",args:[this.ctxId,e]})}removeItem(e){return this.ctx.caller.call("api:call",{method:"unlink-plugin-storage-file",args:[this.ctxId,e]})}clear(){return this.ctx.caller.call("api:call",{method:"clear-plugin-storage-files",args:[this.ctxId]})}hasItem(e){return this.ctx.caller.callAsync("api:call",{method:"exist-plugin-storage-file",args:[this.ctxId,e]})}}class Tn{ctx;constructor(e){this.ctx=e}get React(){return this.ensureHostScope().React}get ReactDOM(){return this.ensureHostScope().ReactDOM}get pluginLocal(){return this.ensureHostScope().LSPluginCore.ensurePlugin(this.ctx.baseInfo.id)}invokeExperMethod(e,...n){const o=this.ensureHostScope();return e=ot(e)?.toLowerCase(),o.logseq.api["exper_"+e]?.apply(o,n)}async loadScripts(...e){(e=e.map(n=>n?.startsWith("http")?n:this.ctx.resolveResourceFullUrl(n))).unshift(this.ctx.baseInfo.id),await this.invokeExperMethod("loadScripts",...e)}registerFencedCodeRenderer(e,n){return this.ensureHostScope().logseq.api.exper_register_fenced_code_renderer(this.ctx.baseInfo.id,e,n)}registerExtensionsEnhancer(e,n){const o=this.ensureHostScope();switch(e){case"katex":o.katex&&n(o.katex).catch(console.error)}return o.logseq.api.exper_register_extensions_enhancer(this.ctx.baseInfo.id,e,n)}ensureHostScope(){if(window===top)throw new Error("Can not access host scope!");return top}}const Oe=t=>`task_callback_${t}`;class ln{_client;_requestId;_requestOptions;_promise;_aborted=!1;constructor(e,n,o={}){this._client=e,this._requestId=n,this._requestOptions=o,this._promise=new Promise((J,W)=>{if(!this._requestId)return W(null);this._client.once(Oe(this._requestId),$=>{$&&$ instanceof Error?W($):J($)})});const{success:u,fail:f,final:k}=this._requestOptions;this._promise.then(J=>{u?.(J)}).catch(J=>{f?.(J)}).finally(()=>{k?.()})}abort(){this._requestOptions.abortable&&!this._aborted&&(this._client.ctx._execCallableAPI("http_request_abort",this._requestId),this._aborted=!0)}get promise(){return this._promise}get client(){return this._client}get requestId(){return this._requestId}}class gt extends Nt.EventEmitter{_ctx;constructor(e){super(),this._ctx=e,this.ctx.caller.on("#lsp#request#callback",n=>{const o=n?.requestId;o&&this.emit(Oe(o),n?.payload)})}static createRequestTask(e,n,o){return new ln(e,n,o)}async _request(e){const n=this.ctx.baseInfo.id,{success:o,fail:u,final:f,...k}=e,J=this.ctx.Experiments.invokeExperMethod("request",n,k),W=gt.createRequestTask(this.ctx.Request,J,e);return k.abortable?W:W.promise}get ctx(){return this._ctx}}const cn=Symbol.for("proxy-continue"),En=Dt()("LSPlugin:user");function Fe(t,e,n){if(typeof n!="function")return!1;const{key:o,label:u,desc:f,palette:k,keybinding:J}=e,W=`SimpleCommandHook${o}${++qt}`;this.Editor["on"+W](n),this.caller?.call("api:call",{method:"register-plugin-simple-command",args:[this.baseInfo.id,[{key:o,label:u,type:t,desc:f,keybinding:J},["editor/hook",W]],k]})}let Me=null;const un={async getInfo(t){return Me||(Me=await this._execCallableAPIAsync("get-app-info")),typeof t=="string"?Me[t]:Me},registerCommand:Fe,registerCommandPalette(t,e){const{key:n,label:o,keybinding:u}=t;return Fe.call(this,"$palette$",{key:n,label:o,palette:!0,keybinding:u},e)},registerCommandShortcut(t,e){const{binding:n}=t,o="$shortcut$",u=o+ot(n);return Fe.call(this,o,{key:u,palette:!1,keybinding:t},e)},registerUIItem(t,e){const n=this.baseInfo.id;this.caller?.call("api:call",{method:"register-plugin-ui-item",args:[n,t,e]})},registerPageMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,o=t;Fe.call(this,"page-menu-item",{key:n,label:o},e)},setFullScreen(t){const e=(...n)=>this._callWin("setFullScreen",...n);t==="toggle"?this._callWin("isFullScreen").then(n=>{n?e():e(!0)}):t?e(!0):e()}};let qt=0;const dn={newBlockUUID(){return this._execCallableAPIAsync("new_block_uuid")},registerSlashCommand(t,e){En("Register slash command #",this.baseInfo.id,t,e),typeof e=="function"&&(e=[["editor/clear-current-slash",!1],["editor/restore-saved-cursor"],["editor/hook",e]]),e=e.map(n=>{const[o,...u]=n;switch(o){case"editor/hook":let f=u[0],k=()=>{this.caller?.callUserModel(f)};typeof f=="function"&&(k=f);const J=`SlashCommandHook${o}${++qt}`;n[1]=J,this.Editor["on"+J](k)}return n}),this.caller?.call("api:call",{method:"register-plugin-slash-command",args:[this.baseInfo.id,[t,e]]})},registerBlockContextMenuItem(t,e){if(typeof e!="function")return!1;const n=t+"_"+this.baseInfo.id,o=t;Fe.call(this,"block-context-menu-item",{key:n,label:o},e)},scrollToBlockInPage(t,e,n){const o="block-content-"+e;n?.replaceState?this.App.replaceState("page",{name:t},{anchor:o}):this.App.pushState("page",{name:t},{anchor:o})}},pn={onBlockChanged(t,e){const n=this.baseInfo.id,o=`hook:db:${ot(`block:${t}`)}`,u=({block:f,txData:k,txMeta:J})=>{f.uuid===t&&e(f,k,J)};return this.caller.on(o,u),this.App._installPluginHook(n,o),()=>{this.caller.off(o,u),this.App._uninstallPluginHook(n,o)}}},On={},r={},P={};class O extends Lt(){_baseInfo;_caller;_version="0.0.8";_debugTag="";_settingsSchema;_connected=!1;_ui=new Map;_mFileStorage;_mRequest;_mExperiments;_beforeunloadCallback;constructor(e,n){super(),this._baseInfo=e,this._caller=n,n.on("sys:ui:visible",o=>{o?.toggle&&this.toggleMainUI()}),n.on("settings:changed",o=>{const u=Object.assign({},this.settings),f=Object.assign(this._baseInfo.settings,o);this.emit("settings:changed",{...f},u)}),n.on("beforeunload",async o=>{const{actor:u,...f}=o,k=this._beforeunloadCallback;try{k&&await k(f),u?.resolve(null)}catch(J){console.debug(`${n.debugTag} [beforeunload] `,J),u?.reject(J)}})}async ready(e,n){if(!this._connected)try{typeof e=="function"&&(n=e,e={});let o=await this._caller.connectToParent(e);this._connected=!0,o=Ot(this._baseInfo,o),this._settingsSchema&&(o.settings=function(u,f){const k=(f||[]).reduce((J,W)=>("default"in W&&(J[W.key]=W.default),J),{});return Object.assign(k,u)}(o.settings,this._settingsSchema),await this.useSettingsSchema(this._settingsSchema)),o?.id&&(this._debugTag=this._caller.debugTag=`#${o.id} [${o.name}]`);try{await this._execCallableAPIAsync("setSDKMetadata",{version:this._version})}catch(u){console.warn(u)}n&&n.call(this,o)}catch(o){console.error(`${this._debugTag} [Ready Error]`,o)}}ensureConnected(){if(!this._connected)throw new Error("not connected")}beforeunload(e){typeof e=="function"&&(this._beforeunloadCallback=e)}provideModel(e){return this.caller._extendUserModel(e),this}provideTheme(e){return this.caller.call("provider:theme",e),this}provideStyle(e){return this.caller.call("provider:style",e),this}provideUI(e){return this.caller.call("provider:ui",e),this}useSettingsSchema(e){return this.connected&&this.caller.call("settings:schema",{schema:e,isSync:!0}),this._settingsSchema=e,this}updateSettings(e){this.caller.call("settings:update",e)}onSettingsChanged(e){const n="settings:changed";return this.on(n,e),()=>this.off(n,e)}showSettingsUI(){this.caller.call("settings:visible:changed",{visible:!0})}hideSettingsUI(){this.caller.call("settings:visible:changed",{visible:!1})}setMainUIAttrs(e){this.caller.call("main-ui:attrs",e)}setMainUIInlineStyle(e){this.caller.call("main-ui:style",e)}hideMainUI(e){const n={key:0,visible:!1,cursor:e?.restoreEditingCursor};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}showMainUI(e){const n={key:0,visible:!0,autoFocus:e?.autoFocus};this.caller.call("main-ui:visible",n),this.emit("ui:visible:changed",n),this._ui.set(n.key,n)}toggleMainUI(){const e=this._ui.get(0);e&&e.visible?this.hideMainUI():this.showMainUI()}get version(){return this._version}get isMainUIVisible(){const e=this._ui.get(0);return Boolean(e&&e.visible)}get connected(){return this._connected}get baseInfo(){return this._baseInfo}get settings(){return this.baseInfo?.settings}get caller(){return this._caller}resolveResourceFullUrl(e){if(this.ensureConnected(),e)return e=e.replace(/^[.\\/]+/,""),function(n,...o){try{const u=new URL(n);if(!u.origin)throw new Error(null);const f=rt.join(n.substr(u.origin.length),...o);return u.origin+f}catch{return rt.join(n,...o)}}(this._baseInfo.lsr,e)}_makeUserProxy(e,n){const o=this,u=this.caller;return new Proxy(e,{get(f,k,J){const W=f[k];return function(...$){if(W){const V=W.apply(o,$.concat(n));if(V!==cn)return V}if(n){const V=k.toString().match(/^(once|off|on)/i);if(V!=null){const ae=V[0].toLowerCase(),we=V.input.slice(ae.length),Re=ae==="off",He=o.baseInfo.id,ge=`hook:${n}:${ot(we)}`,Te=$[0];u[ae](ge,Te);const Ae=()=>{u.off(ge,Te),u.listenerCount(ge)||o.App._uninstallPluginHook(He,ge)};return Re?void Ae():(o.App._installPluginHook(He,ge),Ae)}}let ee=k;return["git","ui","assets"].includes(n)&&(ee=n+"_"+ee),u.callAsync("api:call",{tag:n,method:ee,args:$})}}})}_execCallableAPIAsync(e,...n){return this._caller.callAsync("api:call",{method:e,args:n})}_execCallableAPI(e,...n){this._caller.call("api:call",{method:e,args:n})}_callWin(...e){return this._execCallableAPIAsync("_callMainWin",...e)}get App(){return this._makeUserProxy(un,"app")}get Editor(){return this._makeUserProxy(dn,"editor")}get DB(){return this._makeUserProxy(pn,"db")}get Git(){return this._makeUserProxy(On,"git")}get UI(){return this._makeUserProxy(r,"ui")}get Assets(){return this._makeUserProxy(P,"assets")}get FileStorage(){let e=this._mFileStorage;return e||(e=this._mFileStorage=new Rt(this)),e}get Request(){let e=this._mRequest;return e||(e=this._mRequest=new gt(this)),e}get Experiments(){let e=this._mExperiments;return e||(e=this._mExperiments=new Tn(this)),e}}function ue(t,e){return new O(t,e)}if(window.__LSP__HOST__==null){const t=new yt(null);window.logseq=ue({},t)}})(),j})())})(Nn,Nn.exports);var zt=function(E){return E+(E>0?["th","st","nd","rd"][E>3&&E<21||E%10>3?0:E%10]:"")},Wn=function(E,m){var I=E.getFullYear(),q=E.toString().substring(4,7),h=E.getMonth()+1,j=E.getDate(),C=E.toLocaleString("default",{month:"long"});if(m==="MMM do yyyy")return q+" "+zt(j)+", "+I;if(m.includes("yyyy")&&m.includes("MM")&&m.includes("dd")&&(m.includes("EEEE")||m.includes("EEE")||m.includes("E"))){var s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],S={yyyy:I,dd:("0"+j).slice(-2),MM:("0"+h).slice(-2),EEEE:s[E.getDay()],EEE:s[E.getDay()].substring(0,3),E:s[E.getDay()].substring(0,1)};return""+m.replace(/yyyy|dd|MM|EEEE|EEE|E/gi,function(w){return S[w]})}if(m==="do MMMM yyyy"||m==="MMMM do, yyyy"){var _={yyyy:I,do:zt(j),MMMM:C};return""+m.replace(/yyyy|do|MMMM/gi,function(w){return _[w]})}if(m.includes("yyyy")&&m.includes("MM")&&m.includes("dd")){var g={yyyy:I,dd:("0"+j).slice(-2),MM:("0"+h).slice(-2)};return""+m.replace(/yyyy|dd|MM/gi,function(w){return g[w]})}return m==="MMMM do, yyyy"?E.toLocaleString("default",{month:"long"})+" "+zt(j)+", "+I:m==="do MMM yyyy"?zt(j)+" "+q+" "+I:q+" "+zt(j)+", "+I},Pn={exports:{}};(function(E,m){(function(I,q){E.exports=q()})(mt,function(){var I=1e3,q=6e4,h=36e5,j="millisecond",C="second",s="minute",S="hour",_="day",g="week",w="month",U="quarter",y="year",d="date",b="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},D=function(z,A,T){var G=String(z);return!G||G.length>=A?z:""+Array(A+1-G.length).join(T)+z},ne={s:D,z:function(z){var A=-z.utcOffset(),T=Math.abs(A),G=Math.floor(T/60),M=T%60;return(A<=0?"+":"-")+D(G,2,"0")+":"+D(M,2,"0")},m:function z(A,T){if(A.date()<T.date())return-z(T,A);var G=12*(T.year()-A.year())+(T.month()-A.month()),M=A.clone().add(G,w),Z=T-M<0,i=A.clone().add(G+(Z?-1:1),w);return+(-(G+(T-M)/(Z?M-i:i-M))||0)},a:function(z){return z<0?Math.ceil(z)||0:Math.floor(z)},p:function(z){return{M:w,y,w:g,d:_,D:d,h:S,m:s,s:C,ms:j,Q:U}[z]||String(z||"").toLowerCase().replace(/s$/,"")},u:function(z){return z===void 0}},R="en",L={};L[R]=H;var a=function(z){return z instanceof X},l=function z(A,T,G){var M;if(!A)return R;if(typeof A=="string"){var Z=A.toLowerCase();L[Z]&&(M=Z),T&&(L[Z]=T,M=Z);var i=A.split("-");if(!M&&i.length>1)return z(i[0])}else{var c=A.name;L[c]=A,M=c}return!G&&M&&(R=M),M||!G&&R},p=function(z,A){if(a(z))return z.clone();var T=typeof A=="object"?A:{};return T.date=z,T.args=arguments,new X(T)},v=ne;v.l=l,v.i=a,v.w=function(z,A){return p(z,{locale:A.$L,utc:A.$u,x:A.$x,$offset:A.$offset})};var X=function(){function z(T){this.$L=l(T.locale,null,!0),this.parse(T)}var A=z.prototype;return A.parse=function(T){this.$d=function(G){var M=G.date,Z=G.utc;if(M===null)return new Date(NaN);if(v.u(M))return new Date;if(M instanceof Date)return new Date(M);if(typeof M=="string"&&!/Z$/i.test(M)){var i=M.match(x);if(i){var c=i[2]-1||0,F=(i[7]||"0").substring(0,3);return Z?new Date(Date.UTC(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,F)):new Date(i[1],c,i[3]||1,i[4]||0,i[5]||0,i[6]||0,F)}}return new Date(M)}(T),this.$x=T.x||{},this.init()},A.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},A.$utils=function(){return v},A.isValid=function(){return this.$d.toString()!==b},A.isSame=function(T,G){var M=p(T);return this.startOf(G)<=M&&M<=this.endOf(G)},A.isAfter=function(T,G){return p(T)<this.startOf(G)},A.isBefore=function(T,G){return this.endOf(G)<p(T)},A.$g=function(T,G,M){return v.u(T)?this[G]:this.set(M,T)},A.unix=function(){return Math.floor(this.valueOf()/1e3)},A.valueOf=function(){return this.$d.getTime()},A.startOf=function(T,G){var M=this,Z=!!v.u(G)||G,i=v.p(T),c=function(pe,me){var be=v.w(M.$u?Date.UTC(M.$y,me,pe):new Date(M.$y,me,pe),M);return Z?be:be.endOf(_)},F=function(pe,me){return v.w(M.toDate()[pe].apply(M.toDate("s"),(Z?[0,0,0,0]:[23,59,59,999]).slice(me)),M)},K=this.$W,oe=this.$M,le=this.$D,te="set"+(this.$u?"UTC":"");switch(i){case y:return Z?c(1,0):c(31,11);case w:return Z?c(1,oe):c(0,oe+1);case g:var de=this.$locale().weekStart||0,he=(K<de?K+7:K)-de;return c(Z?le-he:le+(6-he),oe);case _:case d:return F(te+"Hours",0);case S:return F(te+"Minutes",1);case s:return F(te+"Seconds",2);case C:return F(te+"Milliseconds",3);default:return this.clone()}},A.endOf=function(T){return this.startOf(T,!1)},A.$set=function(T,G){var M,Z=v.p(T),i="set"+(this.$u?"UTC":""),c=(M={},M[_]=i+"Date",M[d]=i+"Date",M[w]=i+"Month",M[y]=i+"FullYear",M[S]=i+"Hours",M[s]=i+"Minutes",M[C]=i+"Seconds",M[j]=i+"Milliseconds",M)[Z],F=Z===_?this.$D+(G-this.$W):G;if(Z===w||Z===y){var K=this.clone().set(d,1);K.$d[c](F),K.init(),this.$d=K.set(d,Math.min(this.$D,K.daysInMonth())).$d}else c&&this.$d[c](F);return this.init(),this},A.set=function(T,G){return this.clone().$set(T,G)},A.get=function(T){return this[v.p(T)]()},A.add=function(T,G){var M,Z=this;T=Number(T);var i=v.p(G),c=function(oe){var le=p(Z);return v.w(le.date(le.date()+Math.round(oe*T)),Z)};if(i===w)return this.set(w,this.$M+T);if(i===y)return this.set(y,this.$y+T);if(i===_)return c(1);if(i===g)return c(7);var F=(M={},M[s]=q,M[S]=h,M[C]=I,M)[i]||1,K=this.$d.getTime()+T*F;return v.w(K,this)},A.subtract=function(T,G){return this.add(-1*T,G)},A.format=function(T){var G=this,M=this.$locale();if(!this.isValid())return M.invalidDate||b;var Z=T||"YYYY-MM-DDTHH:mm:ssZ",i=v.z(this),c=this.$H,F=this.$m,K=this.$M,oe=M.weekdays,le=M.months,te=function(me,be,fe,ie){return me&&(me[be]||me(G,Z))||fe[be].slice(0,ie)},de=function(me){return v.s(c%12||12,me,"0")},he=M.meridiem||function(me,be,fe){var ie=me<12?"AM":"PM";return fe?ie.toLowerCase():ie},pe={YY:String(this.$y).slice(-2),YYYY:this.$y,M:K+1,MM:v.s(K+1,2,"0"),MMM:te(M.monthsShort,K,le,3),MMMM:te(le,K),D:this.$D,DD:v.s(this.$D,2,"0"),d:String(this.$W),dd:te(M.weekdaysMin,this.$W,oe,2),ddd:te(M.weekdaysShort,this.$W,oe,3),dddd:oe[this.$W],H:String(c),HH:v.s(c,2,"0"),h:de(1),hh:de(2),a:he(c,F,!0),A:he(c,F,!1),m:String(F),mm:v.s(F,2,"0"),s:String(this.$s),ss:v.s(this.$s,2,"0"),SSS:v.s(this.$ms,3,"0"),Z:i};return Z.replace(Y,function(me,be){return be||pe[me]||i.replace(":","")})},A.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},A.diff=function(T,G,M){var Z,i=v.p(G),c=p(T),F=(c.utcOffset()-this.utcOffset())*q,K=this-c,oe=v.m(this,c);return oe=(Z={},Z[y]=oe/12,Z[w]=oe,Z[U]=oe/3,Z[g]=(K-F)/6048e5,Z[_]=(K-F)/864e5,Z[S]=K/h,Z[s]=K/q,Z[C]=K/I,Z)[i]||K,M?oe:v.a(oe)},A.daysInMonth=function(){return this.endOf(w).$D},A.$locale=function(){return L[this.$L]},A.locale=function(T,G){if(!T)return this.$L;var M=this.clone(),Z=l(T,G,!0);return Z&&(M.$L=Z),M},A.clone=function(){return v.w(this.$d,this)},A.toDate=function(){return new Date(this.valueOf())},A.toJSON=function(){return this.isValid()?this.toISOString():null},A.toISOString=function(){return this.$d.toISOString()},A.toString=function(){return this.$d.toUTCString()},z}(),re=X.prototype;return p.prototype=re,[["$ms",j],["$s",C],["$m",s],["$H",S],["$W",_],["$M",w],["$y",y],["$D",d]].forEach(function(z){re[z[1]]=function(A){return this.$g(A,z[0],z[1])}}),p.extend=function(z,A){return z.$i||(z(A,X,p),z.$i=!0),p},p.locale=l,p.isDayjs=a,p.unix=function(z){return p(1e3*z)},p.en=L[R],p.Ls=L,p.p={},p})})(Pn);const Ht=Pn.exports;var zn={exports:{}};(function(E,m){(function(I,q){E.exports=q()})(mt,function(){return function(I,q,h){q.prototype.isToday=function(){var j="YYYY-MM-DD",C=h();return this.format(j)===C.format(j)}}})})(zn);const Gn=zn.exports,Yn={January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Sunday:"Sun",Monday:"Mon",Tuesday:"Tue",Wednesday:"Wed",Thursday:"Thu",Friday:"Fri",Saturday:"Sat",Today:"Today"},Vn={January:"1\u6708",February:"2\u6708",March:"3\u6708",April:"4\u6708",May:"5\u6708",June:"6\u6708",July:"7\u6708",August:"8\u6708",September:"9\u6708",October:"10\u6708",November:"11\u6708",December:"12\u6708",Sunday:"\u5468\u65E5",Monday:"\u5468\u4E00",Tuesday:"\u5468\u4E8C",Wednesday:"\u5468\u4E09",Thursday:"\u5468\u56DB",Friday:"\u5468\u4E94",Saturday:"\u5468\u516D",Today:"\u4ECA\u5929"},Kn={January:"1\u6708",February:"2\u6708",March:"3\u6708",April:"4\u6708",May:"5\u6708",June:"6\u6708",July:"7\u6708",August:"8\u6708",September:"9\u6708",October:"10\u6708",November:"11\u6708",December:"12\u6708",Sunday:"\u5468\u65E5",Monday:"\u5468\u4E00",Tuesday:"\u5468\u4E8C",Wednesday:"\u5468\u4E09",Thursday:"\u5468\u56DB",Friday:"\u5468\u4E94",Saturday:"\u5468\u516D",Today:"\u4ECA\u5929"},Zn={January:"Januar",February:"Februar",March:"Mars",April:"April",May:"Mai",June:"Juni",July:"Juli",August:"August",September:"September",October:"Oktober",November:"November",December:"Desember",Sunday:"Sol",Monday:"Man",Tuesday:"Tirs",Wednesday:"Ons",Thursday:"Tor",Friday:"Fre",Saturday:"L\xF8r",Today:"I dag"},Qn={January:"Janeiro",February:"Fevereiro",March:"Mar\xE7o",April:"Abril",May:"Maio",June:"Junho",July:"Julho",August:"Agosto",September:"Setembro",October:"Outubro",November:"Novembro",December:"Dezembro",Sunday:"Dom",Monday:"Seg",Tuesday:"Ter",Wednesday:"Qua",Thursday:"Qui",Friday:"Sex",Saturday:"S\xE1b",Today:"Hoje"},Xn={January:"Janeiro",February:"Fevereiro",March:"Mar\xE7o",April:"Abril",May:"Maio",June:"Junho",July:"Julho",August:"Agosto",September:"Setembro",October:"Outubro",November:"Novembro",December:"Dezembro",Sunday:"Dom",Monday:"Seg",Tuesday:"Ter",Wednesday:"Qua",Thursday:"Qui",Friday:"Sex",Saturday:"S\xE1b",Today:"Hoje"},er={January:"Janvier",February:"F\xE9vrier",March:"Mars",April:"Avril",May:"Mai",June:"Juin",July:"Juillet",August:"Ao\xFBt",September:"Septembre",October:"Octobre",November:"Novembre",December:"D\xE9cembre",Sunday:"Dim",Monday:"Lun",Tuesday:"Mar",Wednesday:"Mer",Thursday:"Jeu",Friday:"Ven",Saturday:"Sam",Today:"Aujourd'hui"},tr={January:"Januar",February:"Februar",March:"M\xE4rz",April:"April",May:"Mai",June:"Juni",July:"Juli",August:"August",September:"September",October:"Oktober",November:"November",December:"Dezember",Sunday:"So",Monday:"Mo",Tuesday:"Di",Wednesday:"Mi",Thursday:"Do",Friday:"Fr",Saturday:"Sa",Today:"Heute"},nr={January:"Januarie",February:"Februarie",March:"Maart",April:"April",May:"Mei",June:"Junie",July:"Julie",August:"Augustus",September:"September",October:"Oktober",November:"November",December:"Desember",Sunday:"Son",Monday:"Maan",Tuesday:"Dis",Wednesday:"Woen",Thursday:"Do",Friday:"Vry",Saturday:"Sat",Today:"Vandag"},rr={January:"Enero",February:"Febrero",March:"Marzo",April:"Abril",May:"Mayo",June:"Junio",July:"Julio",August:"Agosto",September:"Septiembre",October:"Octubre",November:"Noviembre",December:"diciembre",Sunday:"Dom",Monday:"Lun",Tuesday:"Mar",Wednesday:"Mi\xE9",Thursday:"Jue",Friday:"Vie",Saturday:"S\xE1b",Today:"Hoy"},or={January:"\u042F\u043D\u0432\u0430\u0440\u044C",February:"\u0424\u0435\u0432\u0440\u0430\u043B\u044C",March:"\u041C\u0430\u0440\u0442",April:"\u0410\u043F\u0440\u0435\u043B\u044C",May:"\u041C\u0430\u0439",June:"\u0418\u044E\u043D\u044C",July:"\u0418\u044E\u043B\u044C",August:"\u0410\u0432\u0433\u0443\u0441\u0442",September:"\u0421\u0435\u043D\u0442\u044F\u0431\u0440\u044C",October:"\u041E\u043A\u0442\u044F\u0431\u0440\u044C",November:"\u041D\u043E\u044F\u0431\u0440\u044C",December:"\u0414\u0435\u043A\u0430\u0431\u0440\u044C",Sunday:"\u0412\u0441",Monday:"\u041F\u043D",Tuesday:"\u0412\u0442",Wednesday:"\u0421\u0440",Thursday:"\u0427\u0442",Friday:"\u041F\u0442",Saturday:"\u0421\u0431",Today:"\u0421\u0435\u0433\u043E\u0434\u043D\u044F"},ar={January:"1\u6708",February:"2\u6708",March:"3\u6708",April:"4\u6708",May:"5\u6708",June:"6\u6708",July:"7\u6708",August:"8\u6708",September:"9\u6708",October:"10\u6708",November:"11\u6708",December:"12\u6708",Sunday:"\u65E5\u66DC\u65E5",Monday:"\u6708\u66DC\u65E5",Tuesday:"\u706B\u66DC\u65E5",Wednesday:"\u6C34\u66DC\u65E5",Thursday:"\u6728\u66DC\u65E5",Friday:"\u91D1\u66DC\u65E5",Saturday:"\u571F\u66DC\u65E5",Today:"\u4ECA\u65E5"},ir={January:"Ocak",February:"\u015Eubat",March:"Mart",April:"Nisan",May:"May\u0131s",June:"Haziran",July:"Temmuz",August:"A\u011Fustos",September:"Eyl\xFCl",October:"Ekim",November:"Kas\u0131m",December:"Aral\u0131k",Sunday:"Pazar",Monday:"Pzt",Tuesday:"Sal\u0131",Wednesday:"\xC7ar",Thursday:"Per",Friday:"Cum",Saturday:"Cts",Today:"Bug\xFCn"},sr={January:"Gennaio",February:"Febbraio",March:"Marzo",April:"Aprile",May:"Maggio",June:"Giugno",July:"Luglio",August:"Agosto",September:"Settembre",October:"Ottobre",November:"Novembre",December:"Dicembre",Sunday:"Dome",Monday:"Lun",Tuesday:"Mar",Wednesday:"Mer",Thursday:"Gio",Friday:"Ven",Saturday:"Sab",Today:"Oggi"},lr={January:"1\uC6D4",February:"2\uC6D4",March:"3\uC6D4",April:"4\uC6D4",May:"5\uC6D4",June:"6\uC6D4",July:"7\uC6D4",August:"8\uC6D4",September:"9\uC6D4",October:"10\uC6D4",November:"11\uC6D4",December:"12\uC6D4",Sunday:"\uC77C\uC694\uC77C",Monday:"\uC6D4\uC694\uC77C",Tuesday:"\uD654\uC694\uC77C",Wednesday:"\uC218\uC694\uC77C",Thursday:"\uBAA9\uC694\uC77C",Friday:"\uAE08\uC694\uC77C",Saturday:"\uD1A0\uC694\uC77C",Today:"\uC624\uB298"},Ln={ko:lr,it:sr,tr:ir,ja:ar,ru:or,es:rr,af:nr,de:tr,fr:er,en:Yn,"zh-CN":Vn,"zh-Hant":Kn,"nb-NO":Zn,"pt-BR":Qn,"pt-PT":Xn},$n="English",Ut={[$n]:"en",Fran\u00E7ais:"fr",Deutsch:"de",\u7B80\u4F53\u4E2D\u6587:"zh-CN",\u7E41\u9AD4\u4E2D\u6587:"zh-Hant",Afrikaans:"af",Espa\u00F1ol:"es","Norsk (bokm\xE5l)":"nb-NO","Portugu\xEAs (Brasileiro)":"pt-BR","Portugu\xEAs (Europeu)":"pt-PT",\u0420\u0443\u0441\u0441\u043A\u0438\u0439:"ru",\u65E5\u672C\u8A9E:"ja",Italiano:"it",T\u00FCrk\u00E7e:"tr",\uD55C\uAD6D\uC5B4:"ko"},cr=Object.keys(Ut);function Jn(E){return m=>{const I=Object.keys(Ln);let q=m;I.includes(Ut[q])&&(q=Ut[q]),I.includes(q)||(q=Ut[E]),q=q||Ut[$n];const h=Ln[q];return h.label=q,h}}Ht.extend(Gn);function fn(E){console.info(`#${logseq.baseInfo.id}: ${E}`)}function ur(E,m){const I=new Array(12);return I[0]=m.January,I[1]=m.February,I[2]=m.March,I[3]=m.April,I[4]=m.May,I[5]=m.June,I[6]=m.July,I[7]=m.August,I[8]=m.September,I[9]=m.October,I[10]=m.November,I[11]=m.December,I[E]}function In(E){return Number.isInteger(Number(E))&&E!==null}function Jt(E,m,I=new Date){const q=In(E)?Number(E):I?.getFullYear(),h=In(m)?Number(m)-1:I?.getMonth();return[q??null,h??null]}function hn(E,m=" |:"){if(Array.isArray(E)){if(E.length!==1)return E;[E]=E}let I=E||"";return I?I.split(new RegExp(`[${m}]+`)):[]}const dr=E=>{const m=top?.document.createElement("textarea");if(m){m.value=E,m.setAttribute("readonly",""),m.style.position="absolute",m.style.left="-9999px",top?.document.body.appendChild(m);const I=top?.document.getSelection();if(I){const q=I.rangeCount>0?I.getRangeAt(0):!1;m.select(),top?.document.execCommand("copy"),top?.document.body.removeChild(m),q&&(I.removeAllRanges(),I.addRange(q))}}};async function yn(E,m,I,q="",h=[]){jn();const C=Jn(logseq.settings?.defaultLanguage)(q),s=new Date,S=ur(m,C),_=s.getDate(),g=new Date(E,m,1),w=g.getDay(),U=Ht(g).daysInMonth();return await yr(w+1,U,_,m,S,E,I,C,q,h)}let gn=[];async function pr(E,m){if(gn.length===0){const q=(await gr(E,m+1)).reduce((h,j)=>{const C=j["journal-day"].toString();return h[C]=j,h},{});gn=Object.keys(q).map(h=>{const j=Ht(q[h]["journal-day"].toString());return j.isValid()?j.date():0}).filter(h=>h>0)}return gn}let mn=[];async function fr(E,m){if(mn.length===0){const q=(await mr(E,m+1)).reduce((h,j)=>{const C=j["journal-day"].toString();return h[C]=j,h},{});mn=Object.keys(q).map(h=>{const j=Ht(q[h]["journal-day"].toString());return j.isValid()?j.date():0}).filter(h=>h>0)}return mn}let bn=[];async function hr(E,m){if(bn.length===0){const q=(await br(E,m+1)).reduce((h,j)=>{const C=j["journal-day"].toString();return h[C]=j,h},{});bn=Object.keys(q).map(h=>{const j=Ht(q[h]["journal-day"].toString());return j.isValid()?j.date():0}).filter(h=>h>0)}return bn}function jn(){gn=[],mn=[],bn=[]}async function yr(E,m,I,q,h,j,C,s,S,_){const g=new Date,w=await logseq.App.getUserConfigs(),U=await pr(j,q),y=await fr(j,q),d=await hr(j,q);let b=q-1,x=j;b<0&&(b=b+12,x--);let Y=q+1,H=j;Y>11&&(Y=Y-12,H++);let D="";D+='<table class="logseq-block-calendar">',_.includes("nohead")||(_.includes("nonav")?(D+='<th COLSPAN=7 class="calendar-title">',_.includes("noyear")?D+=`<span class="calendar-month">${h}</span>`:D+=`<span class="calendar-month">${h}</span> <span class="calendar-year">${j}</span>`,D+="</th>"):(D+='<th COLSPAN=4 class="calendar-title">',_.includes("noyear")?D+=`<span class="calendar-month">${h}</span>`:D+=`<span class="calendar-month">${h}</span> <span class="calendar-year">${j}</span>`,D+="</th>",D+='<th COLSPAN=3 class="calendar-nav">',D+=`<a class="button inline-button no-padding-button" data-year="${x}" data-month="${b+1}" data-slot="${C}" data-language="${S}" data-options="${_.join(" ")}" data-on-click="loadCalendar" title="Jump to previous month."><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left inline-block" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <polyline points="15 6 9 12 15 18" />
    </svg></a> <a class="button inline-button padding-button" data-year="${g.getFullYear()}" data-month="${g.getMonth()+1}" data-slot="${C}" data-language="${S}" data-options="${_.join(" ")}" data-on-click="loadCalendar" title="Jump back to current month.">${s.Today}</a> <a class="button inline-button no-padding-button" data-year="${H}" data-month="${Y+1}" data-slot="${C}" data-language="${S}" data-options="${_.join(" ")}" data-on-click="loadCalendar" title="Jump to next month"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-right inline-block" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <polyline points="9 6 15 12 9 18" />
    </svg></a>`,D+="</th>"));const ne="<td>",R="</td>",L=new Array(7),a=logseq.settings?.firstDayOfWeek||"sunday";a==="sunday"?(L[0]=s.Sunday,L[1]=s.Monday,L[2]=s.Tuesday,L[3]=s.Wednesday,L[4]=s.Thursday,L[5]=s.Friday,L[6]=s.Saturday):(L[0]=s.Monday,L[1]=s.Tuesday,L[2]=s.Wednesday,L[3]=s.Thursday,L[4]=s.Friday,L[5]=s.Saturday,L[6]=s.Sunday),D+='<tr class="calendar-head" align="center" valign="center">';for(let v=0;v<7;++v)D+=ne+L[v]+R;D+="</tr>";let l=1,p=1;for(;!(l>m);){D+='<tr align="center" valign="top">';for(let v=1;v<=7&&!(l>m);++v)if(p<(a==="sunday"?E:E-1>0?E-1:7))D+="<td></td>",p++;else{const X=Wn(new Date(j,q,l),w.preferredDateFormat),re="calendar-day-rec",z=logseq.settings?.enableDot&&U.includes(l),A=logseq.settings?.enableDot&&y.includes(l),T=logseq.settings?.enableDot&&d.includes(l);let G="";(I>l&&j===g.getFullYear()&&q===g.getMonth()||q<g.getMonth())&&(G="calendar-day-past"),I===l&&j===g.getFullYear()&&q===g.getMonth()&&(G="calendar-day-today"),D+=`<td><a class="calendar-day ${re} button inline-button ${G}" data-type="day" data-value="${X}" data-on-click="processJump">${l}${z&&!T&&!A?'<span class="dot-journal-without-task"></span>':z&&A?'<span class="dot-journal-with-task"></span><span class="dot-task-undone"></span>':z&&T?'<span class="dot-journal-with-task"></span><span class="dot-task-done"></span>':""}</td>`,l++}D+="</tr>"}return D+="</table>",D}async function gr(E,m){const I=E+(m<10?"0":"")+m;let q;try{q=await logseq.DB.datascriptQuery(`
      [:find (pull ?p [*])
       :where
       [?b :block/page ?p]
       [?p :block/journal? true]
       [?p :block/journal-day ?d]
       [(>= ?d ${I}01)] [(<= ?d ${I}31)]]
    `)}catch(h){console.error(h)}return(q||[]).flat()}async function mr(E,m){const I=E+(m<10?"0":"")+m;let q;try{q=await logseq.DB.datascriptQuery(`
      [:find (pull ?p [*])
        :where
        [?b :block/marker ?marker]
        [(contains? #{"NOW" "LATER" "TODO" "DOING", "WAITING"} ?marker)]
        [?b :block/page ?p]
        [?p :block/journal? true]
        [?p :block/journal-day ?d]
        [(>= ?d ${I}01)] [(<= ?d ${I}31)]]
      ]
    `)}catch(h){console.error(h)}return(q||[]).flat()}async function br(E,m){const I=E+(m<10?"0":"")+m;let q;try{q=await logseq.DB.datascriptQuery(`
      [:find (pull ?p [*])
        :where
        [?b :block/marker ?marker]
        [(contains? #{"DONE"} ?marker)]
        [?b :block/page ?p]
        [?p :block/journal? true]
        [?p :block/journal-day ?d]
        [(>= ?d ${I}01)] [(<= ?d ${I}31)]]
      ]
    `)}catch(h){console.error(h)}return(q||[]).flat()}function Un(E={}){logseq.settings?.alwaysRenderLocation==="Left sidebar"?logseq.provideStyle({key:"block-calendar-left-sidebar",style:`
        :root {
          --ls-left-sidebar-width: 350px;
        }
        #nav-sidebar-placeholder {
          padding: 1rem;
          border-top: 1px solid #eee;
          border-bottom: 1px solid #eee;
        }
      `}):logseq.provideStyle({key:"block-calendar-left-sidebar",style:`
        #nav-sidebar-placeholder {
          display: none;
        }
      `}),logseq.provideStyle({key:"block-calendar",style:`
    [id^="logseq-block-calendar--block-calendar-yearly-slot"]  {
      display: flex;
      flex-direction: column;
    }

    [id^="logseq-plugin-block-calendar--block-calendar-yearly-slot"] .logseq-block-calendar:not(:nth-child(${logseq.settings?.yearlyColumns||3}n)) {
      border-right: 1px solid;
      border-color: var(--ls-guideline-color);
    }

    [id^="logseq-block-calendar--block-calendar-yearly-slot"] .header .inline-button  {
      display: inline-block;
      height: 2.6rem;
    }
    [id^="logseq-block-calendar--block-calendar-yearly-slot"] .header  {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    [id^="logseq-block-calendar--block-calendar-yearly-slot"] .controls  {
      display: flex;
    }
    [id^="logseq-block-calendar--block-calendar-yearly-slot"] .calendar-header-title  {
      font-weight: bold;
      font-size: 1.5em;
      height: 60px;
    }

    [id^="logseq-block-calendar--block-calendar-yearly-slot"] .logseq-block-calendar .calendar-title  {
      font-weight: bold;
      font-size: 1em;
      height: 40px;
    }

    [id^="logseq-block-calendar--block-calendar-yearly-slot"] .yearly-months {
       display: grid !important;
       grid-template-columns: repeat(${logseq.settings?.yearlyColumns||3}, ${100/(logseq.settings?.yearlyColumns||3)}%);
      gap: 10px;
    }

    .logseq-block-calendar {
      width: ${logseq.settings?.tableWidth||"100%"};
      user-select: none;
      margin: 0;
      table-layout:fixed;
      min-width: 295px;
    }
    .logseq-block-calendar .calendar-title {
      font-weight: normal;
    }
    .logseq-block-calendar .inline-button {
      display: inline-block;
    }

    .logseq-block-calendar .no-padding-button {
      padding: 0;
      height: inherit;
    }
    .logseq-block-calendar .padding-button {
      padding-left: 0.5rem;
      padding-right: 0.5rem;
      height: inherit;
    }
    .logseq-block-calendar tr:nth-child(even) {
      background-color: transparent;
    }
    .logseq-block-calendar tr:nth-child(odd) {
      background-color: transparent;
    }
    .logseq-block-calendar th {
      border-bottom: 0;
      font-size: 20px;
      font-weight: bold;
      padding: 4px;
    }
    .logseq-block-calendar td {
      font-size: 14px;
      padding: 0;
      text-align: center;
    }

    .logseq-block-calendar .calendar-head {
      font-weight: bold;
      color: #999999;
    }

    .logseq-block-calendar a {
      color: var(--ls-primary-text-color);
    }

    .logseq-block-calendar .calendar-day-today {
      font-weight: bold;
      background-color: var(--ls-quaternary-background-color);
      color: var(--ls-link-text-color);
    }

    .logseq-block-calendar .calendar-day-past {
      color: #999999;
    }

    .logseq-block-calendar .calendar-nav {
      text-align: right;
      font-size: 14px;
      font-weight: bold;
    }
    .logseq-block-calendar .calendar-nav a {
      color: #999999;
    }
    .logseq-block-calendar .calendar-day-rec {
      position: relative;
    }
    .logseq-block-calendar .calendar-day-rec .dot-task-undone::after {
      content: "";
      display: block;
      background-color: ${logseq.settings?.taskUndoneDotColor};
      width: 4px;
      height: 4px;
      transform: rotate(45deg);
      position: absolute;
      right: calc(50% - 5px);
    }
    .logseq-block-calendar .calendar-day-rec .dot-task-done::after {
      content: "";
      display: block;
      background-color: ${logseq.settings?.taskDoneDotColor};
      width: 4px;
      height: 4px;
      transform: rotate(45deg);
      position: absolute;
      right: calc(50% - 5px);
    }
    .logseq-block-calendar .calendar-day-rec .dot-journal-with-task::after {
      content: "";
      display: block;
      background-color: ${logseq.settings?.journalDotColor};
      width: 4px;
      height: 4px;
      border-radius: 100%;
      position: absolute;
      left: calc(50% - 5px);
    }
    .logseq-block-calendar .calendar-day-rec .dot-journal-without-task::after {
      content: "";
      display: block;
      background-color: ${logseq.settings?.journalDotColor||"red"};
      width: 4px;
      height: 4px;
      margin: auto;
      border-radius: 100%;
    }
    #right-sidebar-container #block-calendar-widget_placeholder {
      padding: 6px 16px 6px 12px;
    }
    `})}const vr=[{key:"settings",title:"Settings",type:"heading"},{key:"enableDot",type:"boolean",title:"Enable dot",description:"Enable red dot, to show whether or not journal exists on that day. Need reload to take effect.",default:!0},{key:"firstDayOfWeek",type:"enum",title:"First day of week",description:"Which day is the first day of your week? Need to trigger rerender manually to take effect.",enumChoices:["monday","sunday"],enumPicker:"radio",default:"sunday"},{key:"alwaysRenderLocation",type:"enum",enumChoices:["Left sidebar","Right sidebar","Custom","Disabled"],title:"Widget location",description:"Always render calendar in predefined or custom location.",default:"Disabled"},{key:"alwaysRenderIn",type:"string",title:"use .sidebar-item-list to locate the right sidebar",description:"Provide CSS selector: ID or class. Only works when alwaysRenderLocation = Custom",default:".sidebar-item-list"},{key:"yearlyColumns",type:"enum",enumChoices:["2","3","4"],title:"",description:"Choose how many columns in yearly view",default:"3"},{key:"language",title:"Language",type:"heading"},{key:"defaultLanguage",type:"enum",title:"Language locale",enumChoices:cr,description:"",default:$n},{key:"theme",title:"Look and feel",type:"heading"},{key:"tableWidth",type:"string",title:"Calendar width",description:"Set calendar width, default is 100%.",default:"100%"},{key:"journalDotColor",type:"string",title:"Journal dot color",description:"Journal dot color",default:"#0000ff",inputAs:"color"},{key:"taskUndoneDotColor",type:"string",title:"Undone task dot color",description:"Undone task dot color",default:"#ff18ff",inputAs:"color"},{key:"taskDoneDotColor",type:"string",title:"Done task dot color",description:"Done task dot color",default:"#03b803",inputAs:"color"}];logseq.useSettingsSchema(vr);logseq.onSettingsChanged(()=>{Un()});const Hn="block-calendar-",vn="widget",Bn=Hn+vn,Fn=`#${Bn}_placeholder`,wr=`
  <svg xmlns="http://www.w3.org/2000/svg"
       class="icon icon-tabler icon-tabler-chevron-left inline-block"
       width="20" height="20" viewBox="0 0 24 24"
       fill="none" stroke="currentColor"
       stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
       >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <polyline points="15 6 9 12 15 18" />
  </svg>
`.trim(),_r=`
  <svg xmlns="http://www.w3.org/2000/svg"
       class="icon icon-tabler icon-tabler-chevron-right inline-block"
       width="20" height="20" viewBox="0 0 24 24"
       stroke="currentColor" fill="none"
       stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
       >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <polyline points="9 6 15 12 9 18" />
  </svg>
`.trim(),Cr=`
  <svg xmlns="http://www.w3.org/2000/svg"
       class="icon icon-tabler icon-tabler-pencil inline-block"
       width="20" height="20" viewBox="0 0 24 24"
       stroke="currentColor" fill="none"
       stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"
       >
    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
    <path d="M4 20h4l10.5 -10.5a1.5 1.5 0 0 0 -4 -4l-10.5 10.5v4" />
    <line x1="13.5" y1="6.5" x2="17.5" y2="10.5" />
  </svg>
`.trim();function Dn(E,m){if(!m)throw new Error("Attemp to render without slot");const I={reset:!0,template:E};m===vn?(I.key=Bn,I.path=Fn):(I.key=Hn+m,I.slot=m),logseq.provideUI(I)}async function Rn(E,m,I,q,h){const j=new Date,C=q.label,s=h.join(" ");let S="";for(let g of[0,1,2,3,4,5,6,7,8,9,10,11])S+=await yn(I,g,m,q.label,["nonav","noyear"]);let _=null;return h.includes("nohead")?_="":(_=`
      <div class="header">
        <span class="calendar-header-title">${I}</span>
        <div class="controls">
          <a class="button inline-button no-padding-button"
             data-uuid="${E}"
             data-on-click="editBlock"
            >${Cr}</a>
    `.trim(),h.includes("nonav")||(_+=`
        <a class="button inline-button no-padding-button"
           title="Jump to previous year."
           data-on-click="loadCalendarYearly"
           data-year="${I-1}"
           data-language="${C}"
           data-slot="${m}"
           data-uuid="${E}"
           data-options="${s}"
          >${wr}</a>

        <a class="button inline-button padding-button"
           title="Jump back to current year."
           data-on-click="loadCalendarYearly"
           data-year="${j.getFullYear()}"
           data-language="${C}"
           data-slot="${m}"
           data-uuid="${E}"
           data-options="${s}"
          >${q.Today}</a>

        <a class="button inline-button no-padding-button"
           title="Jump to next year"
           data-on-click="loadCalendarYearly"
           data-year="${I+1}"
           data-language="${C}"
           data-slot="${m}"
           data-uuid="${E}"
           data-options="${s}"
          >${_r}</a>

     `.trim()),_+="</div></div>"),_+`<div class="yearly-months">${S}</div>`}function qn(E,m){logseq.provideUI({key:"block-calendar-yearly-"+m,slot:m,reset:!0,template:E})}const kr=async()=>{logseq.App.onGraphAfterIndexed(()=>{jn()}),logseq.App.onCurrentGraphChanged(()=>{jn()});const E=Jn(logseq.settings?.defaultLanguage);logseq.Editor.registerSlashCommand("Insert Block Calendar",async()=>{await logseq.Editor.insertAtEditingCursor("{{renderer block-calendar}}")}),logseq.Editor.registerSlashCommand("Insert Block Yearly Calendar",async()=>{await logseq.Editor.insertAtEditingCursor("{{renderer block-calendar-yearly}}")}),logseq.provideModel({async editBlock(h){const{uuid:j}=h.dataset;await logseq.Editor.editBlock(j)},async processJump(h){const{type:j,value:C}=h.dataset;if(j==="day")if(top?.document.body?.dataset?.activeKeystroke==="Shift"||top?.document.body?.dataset?.activeKeystroke&&top?.document.body?.dataset?.activeKeystroke?.indexOf("Shift")>-1){const s=await logseq.Editor.getPage(C);s&&logseq.Editor.openInRightSidebar(s.uuid)}else top?.document.body?.dataset?.activeKeystroke==="Meta"||top?.document.body?.dataset?.activeKeystroke&&top?.document.body?.dataset?.activeKeystroke?.indexOf("Meta")>-1?dr(C):logseq.App.pushState("page",{name:C})},async loadCalendar(h){const{year:j,month:C,slot:s,language:S,options:_}=h.dataset,[g,w]=Jt(j,C);if(g===null||w===null)return;const U=await yn(g,w,s,S,hn(_));Dn(U,s)},async loadCalendarYearly(h){let{year:j,slot:C,language:s,uuid:S,options:_}=h.dataset;const[g,w]=Jt(j,null,new Date),U=E(s);if(_=hn(_),g===null)return;const y=await Rn(S,C,g,U,_);qn(y,C)}}),logseq.App.onMacroRendererSlotted(async({slot:h,payload:j})=>{let[C]=j.arguments;const s=j.uuid;if(C==="block-calendar"){let[S,_,g,w,...U]=j.arguments;const[y,d]=Jt(_,g,new Date);if(U=hn(U),y===null||d===null)return;const b=await yn(y,d,h,w,U);Dn(b,h)}else if(C==="block-calendar-yearly"){let[S,_,g,...w]=j.arguments;const[U,y]=Jt(_,null,new Date);(g?.indexOf("nonav")>-1||g?.indexOf("nohead")>-1)&&(w.push(g),g="");const d=E(g);if(w=hn(w),U===null)return;const b=await Rn(s,h,U,d,w);qn(b,h)}});const m=async(h,j=!1)=>{let C=top?.document.querySelector(`${Fn}`);const s=b=>{!b||(b.style.display="none",b.remove(),b=null)};if(logseq.settings?.alwaysRenderLocation==="Left sidebar"?h="#nav-sidebar-placeholder":logseq.settings?.alwaysRenderLocation==="Right sidebar"&&(h=".sidebar-item-list"),!h||logseq.settings?.alwaysRenderLocation==="Disabled"){s(C),fn("Remove calendar widget");return}const S=top?.document.querySelector(h);if(!S){s(C),fn("Remove calendar widget");return}(!C||j)&&(C?(s(C),fn("Refresh calendar widget")):fn("Create calendar widget"),C=top.document.createElement("div"),C.id=Fn.slice(1),S.insertAdjacentElement("afterbegin",C)),C.style.display="block";const _=C.querySelector(".calendar-nav > a");let g=null,w=null;_&&(g=_.dataset.year,w=_.dataset.month);let[U,y]=Jt(g,w,new Date);if(U===null||y===null)return;_&&(y++,y===12&&(U++,y=0));const d=await yn(U,y,vn,logseq.settings?.defaultLanguage,[]);Dn(d,vn)},I=top?.document.querySelector(".nav-contents-container"),q=top.document.createElement("div");q.id="nav-sidebar-placeholder",I.before(q),setTimeout(async()=>{await m(logseq.settings?.alwaysRenderIn)},1e3),logseq.App.onGraphAfterIndexed(()=>{setTimeout(async()=>{await m(logseq.settings?.alwaysRenderIn)},1e3)}),logseq.App.onCurrentGraphChanged(()=>{setTimeout(async()=>{await m(logseq.settings?.alwaysRenderIn)},1e3)}),logseq.App.onSidebarVisibleChanged(async h=>{h.visible&&await m(logseq.settings?.alwaysRenderIn)}),logseq.onSettingsChanged(async(h,j)=>{(h.alwaysRenderLocation!==j.alwaysRenderLocation||h.alwaysRenderIn!==j.alwaysRenderIn)&&await m(h.alwaysRenderIn,!0),h.defaultLanguage!==j.defaultLanguage&&await m(h.alwaysRenderIn,!0)}),logseq.DB.onChanged(async({blocks:h,txData:j,txMeta:C})=>{for(const s of h)if(s.journalDay){await m(logseq.settings?.alwaysRenderIn);return}}),Un()};logseq.ready().then(kr).catch(console.error);
